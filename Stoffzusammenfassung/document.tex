%http://de.wikipedia.org/wiki/Hilfe:TeX#Sonderzeichen_in_TeX
%http://www.kubieziel.de/computer/latex-tutorial.html
%http://www.math.uiuc.edu/~hildebr/tex/course/intro2.html
%http://en.wikibooks.org/wiki/LaTeX/Packages/Listings
%Immer document.tex oder main.tex nennen!
%http://latex.mschroeder.net/
%http://stackoverflow.com/questions/741985/latex-source-code-listing-like-in-professional-book
%http://amath.colorado.edu/documentation/LaTeX/reference/faq/bibstyles.pdf
%ftp://tug.ctan.org/pub/tex-archive/info/l2tabu/german/l2tabu.pdf
%http://amath.colorado.edu/documentation/LaTeX/reference/faq/bibstyles.html#styles
%http://www.bibtex.org/SpecialSymbols/de/
%http://amath.colorado.edu/documentation/LaTeX/reference/faq/bibstyles.html#styles
%http://www.bibtex.org/SpecialSymbols/de/
%http://en.wikipedia.org/wiki/Help:Displaying_a_formula
%mit "\input{datei}" wird die Datei "datei.tex" direkt an dieser Stelle eingefügt

\documentclass[
% *** Papiergröße und Seitenteilung ***
	openany,
	german,
	paper=a4,				%A4
	openright,				%Bindung links, aufgeschlagen von rechts
	DIV=15,					%Seitenteilung (Anzahl der Teile). Einfach mal damit spielen
							%8..15
	BCOR=-1.0cm,				%Binderand auf der Innenseite für die Buchbindung
% *** Formatierung/Schriftgröße/Kopf/Fußzeilenoptionen
	8pt,					%Schriftgröße 12pt
	parskip,				%kann mit einer Länge versehen werden um die Absatzgröße
							%einzustellen	
	headsepline,			%Kopfzeile über jeder Seite anlegen
	cleardoublepage=empty,	%Füllseiten sind auch wirklich "leer", also auch ohne
							%Seitennummerierung
	%,chapterprefix
% *** Einträge im Inhaltsverzeichnis (TOC) definieren ***
	bibtotoc,				%Literaturverz/Referenzen
	]{scrreprt}				%KOMA-Vorlage scrrprt

% *** KOMA-Seitenstil Kopfzeilen/Fußzeilen! ***
\setkomafont{disposition}{\rmfamily}
\usepackage{scrpage2} 		%KOMA-Seitenstil
\pagestyle{scrheadings} 	%Seitenstile von scrpage2 {KOMA} aktivieren
\automark[section]{chapter}	%Kapitel innen, Unterkapitel rechts
\clearscrheadings 			%Alle Markierungen auf den Seiten löschen
\ihead{}					%Seitenkopf innen (Bei D.seite l.Seite: r.o. und bei r.Seite:l.o)
\chead{}					%Seitenkopf mitte
\ohead{\headmark}			%Seitenkopf außen 
\ifoot{}					%Seitenfuß innen
\cfoot{}					%Seitenfuß mitte
\ofoot{\pagemark}			%Seitenfuß außen
\setlength{\headheight}{1.1\baselineskip}	%Höhe des reservierten Platzes am Seitenkopf

	
%******************************
%      Sprache und Schrift 
%******************************	
%alles für deutsche Eingabe (sonst keine Umlaute im Sourcecode möglich)   
\usepackage[latin1]{inputenc}
%\usepackage[utf8]{inputenc}
\usepackage[english,ngerman]{babel} 
\usepackage[T1]{fontenc} 	
\usepackage{lmodern}		%bessere Schrift		
%  **  Absätze  **
\parindent 0pt				%Absätze nicht von links einrücken
%Größe dynamisch anpassen, so dass auf die Seite mehr Text geht
%oder aufgeweitet wird, so dass eine angefangene Seite besser gefüllt wird
%\usepackage{setspace}		
\usepackage[onehalfspacing]{setspace}

%******************************
% ALTE SPRACHEN
%******************************
%\usepackage{ibycus4}	%altgriechisch
%\usepackage{etex}
%\usepackage{cjhebrew}		%hebräisch
%\usepackage[english]{betababel}

%\usepackage{palatino}
%\usepackage{latexsym}
%\usepackage{multirow}
%\usepackage{graphicx}


%*********************************
%	Pakete für Index/Glossar/Mathe/...
%*********************************
% ** Mathe/Formeln **
\usepackage{amsmath} 		%TeX-Mathe ermöglichen
% ** Inhaltsverzeichnis **
\usepackage{makeidx}		%wird durch \makeindex eingeleitet und
							%\printindex ausgeführt
\makeindex
% ** Bilder/Grafiken einbinden **
\usepackage{graphicx}		%Graphiken aller Art einbinden, auch eps
\usepackage{float} 			%platziert grafiken besser
% ** Links im PDF werden anklickbar **
\usepackage{hyperref}
% ** Glossar für Begriffsdefinitionen wird erstellt **
\usepackage{nomencl}		%Nomenklatur-Paket für das Glossar verwenden 
\makenomenclature			%wird durch /makenomenclature eingeleitet und mit
							%/printnomenclature ausgeführt
% ** Listings ** ->Sourcecode vorformatiert zitieren -> z Zt auf C++ eingestellt
\usepackage{listings}		%Code-Listings erlauben
\usepackage{color}			%ermöglicht Farbvorgaben, z.B. bei den Listings
\usepackage{courier}
\usepackage{caption}
\usepackage{subfig}
\usepackage{titlesec}
\usepackage{makecell}
\usepackage{enumitem}
\usepackage{xcolor}
\usepackage{multirow}
% ** - **

%******************************
%  Listings konfigurieren
%******************************
\lstset{
         basicstyle=\footnotesize\ttfamily, % Standardschrift
         numbers=left,               % Ort der Zeilennummern
         %numberstyle=\tiny,          % Stil der Zeilennummern
         %stepnumber=2,               % Abstand zwischen den Zeilennummern
         numbersep=5pt,              % Abstand der Nummern zum Text
         tabsize=2,                  % Groesse von Tabs
         extendedchars=true,         %
         breaklines=true,            % Zeilen werden Umgebrochen
         keywordstyle=\color{red},
    		frame=none,         
 %        keywordstyle=[1]\textbf,    % Stil der Keywords
 %        keywordstyle=[2]\textbf,    %
 %        keywordstyle=[3]\textbf,    %
 %        keywordstyle=[4]\textbf,   \sqrt{\sqrt{}} %
         stringstyle=\color{blue}\ttfamily, % Farbe der String
         showspaces=false,           % Leerzeichen anzeigen ?
         showtabs=false,             % Tabs anzeigen ?
         xleftmargin=17pt,
         framexleftmargin=17pt,
         framexrightmargin=5pt,
         framexbottommargin=4pt,
         %backgroundcolor=\color{lightgray},
         showstringspaces=false      % Leerzeichen in Strings anzeigen ?        
}
%\lstset{extendedchars=false}
\lstloadlanguages{C,C++,XML,Java, Python,Matlab, VHDL}
%\DeclareCaptionFont{blue}{\color{blue}} 
%\captionsetup[lstlisting]{singlelinecheck=false, labelfont={blue}, textfont={blue}}
\DeclareCaptionFont{white}{\color{white}}
\DeclareCaptionFormat{listing}{\colorbox[cmyk]{0.43, 0.35, 0.35,0.01}{\parbox{\textwidth}{\hspace{15pt}#1#2#3}}}
\captionsetup[lstlisting]{format=listing,labelfont=white,textfont=white, singlelinecheck=false, margin=0pt, font={bf,footnotesize}}


%******************
%  RESERVIERT
%******************
%\usepackage{mparhack}		%evtl. notwendig, wenn Ränder buggy
%\input{Kapitel/Zusatz}	%andere Textdateien includieren

%********************************************************
%	Titel usw., auch für das PDF
%********************************************************
\title{Vorlage für eine Bachelorarbeit mit LaTeX}
\author{René Bauer}
\date{9. Mai 2011}
% ** Einträge für das erzeugte PDF **
\hypersetup{
pdfauthor = {René Bauer},
pdftitle = {Vorlage für eine Arbeit mit LaTeX}, 
pdfsubject = {Steuerungsoptimierung},
pdfkeywords = {TeX, LaTeX, pdflatex, Bachelorarbeit, Bachelorthesis, Diplomarbeit},
pdfcreator = {LaTeX with hyperref package},
pdfproducer = {dvips + ps2pdf}	%eigentlich ist es pdflatex
}
\lstset{language=C++,
	basicstyle=\ttfamily,
	keywordstyle=\color{blue}\ttfamily,
	stringstyle=\color{red}\ttfamily,
	commentstyle=\color{green}\ttfamily,
	numbers=none,
	morecomment=[l][\color{magenta}]{\#}
}
\titleformat{\chapter}[display]
{\normalfont\huge}{}{10pt}{\Large}
\titlespacing{\chapter}{0pt}{-125pt}{0pt}

\titleformat{\section}[display]
{\normalfont\huge}{}{-40pt}{\large}

%*********************************************
%	Fußnoten durchgehend nummerieren
%*********************************************
% - normalerweise wird je Seite oder Kapitel neu gezählt
\usepackage{chngcntr} 
\counterwithout{footnote}{chapter}

%*********************************************
% Überschriften usw neu benennen
%*********************************************
% hier ist nicht die Namensgebung und Aufnahme der
% Begriffsdefinitionen, hierfür bitte unten nachschauen!
%\renewcommand{\contentsname}{Table of contents}
%\renewcommand{\listfigurename}{List of figures}
%\renewcommand{\figurename}{Figure}
%\renewcommand{\tablename}{Table}
%\renewcommand{\listtablename}{List of tables}

%************************************************
%    HIER BEGINNT DAS EIGENTLICHE DOKUMENT
%************************************************
\begin{document}

%**************************************************************
%   unbedingt eine Seite für die spätere Bindung frei lassen!
%**************************************************************
%\newpage

%******************************************************
%                     Titelblatt
%******************************************************

\chapter{Zusammenfassung - Netzwerke II}
\section{Drahtlose Netzwerke}
\subsection{Grundlagen}
\vspace{-1.5em}
\textbf{Wireless Host (Drahtloser Teilnehmer):} Endystem auf dem die Applikation läuft (stationär oder mobile), z.B. Smartphone, PC\\
\textbf{Wireless Link (Drahtlose Verbindung):} Verbindet Teilnehmer direkt oder per Basisstation (Abdeckung, Datenrate)\\
\textbf{Basisstation (Base Station):} Überträgt Datenpakete zwischen drahtgebundenem zu drahtlosem Netzwerk,\\meist mit drahtgebundenem Netzwerk verbunden (WLAN Access Point, UMTS Basisstation)\\
\textbf{Drahtloses Infrastruktur Netzwerk:} Netzwerkteilnehmer sind über Basisstation mit dem Netz verbunden\\
\textbf{Drahtloses Ad-Hoc Netzwerk:} Keine Infrastruktur (Basisstationen), Teilnehme bilden das Netz selbst.\\
Nachteile: passive Teilnehmer haben trotzdem Stromverbrauch, eigene Daten landen auf fremden Mobiltelefonen und höhere Latenz\\
\textbf{Single-Hop:} Genau ein wireless Link\\
\textbf{Multi-Hop:} Übertragung geht über mehrere wireless Links in Folge
\par

\begin{tabular}{ll}
	\multicolumn{2}{c}{Übliche Datenraten}\\
	\hline
	\textbf{GSM (2G)} & 0.56 Mb/s\\
	\textbf{UMTS (3G)} & 4 Mb/s\\
	\textbf{LTE (4G) und 802.11b} & 5 - 11 Mb/s\\
	\textbf{802.11ag} & 54 Mb/s\\
	\textbf{802.11n} & 200 Mb/s
\end{tabular}
\qquad
\begin{tabular}{lll}
	{} & \multicolumn{2}{c}{Beispiele für Single und Multi-Hop}\\
	\hline
	{} & Single Hop & Multiple Hops\\
	\hline
	Infrastruktur & \makecell[l]{Host verbindet sich mit Basisstation\\(Wifi, zellulare Netzwerke)\\und diese dann mit dem Internet} & \makecell[l]{Host muss möglicherweise durc\\mehrere drahtlose Geräte um sich mit\\dem Internet zu verbinden: \textit{Mesh Net}}\\
	\hline
	\makecell[l]{Keine\\Infrastruktur} & \makecell[l]{Keine Basisstation und auch\\keine Verbindung zu weiterem\\Internet (z.B. Bluetooth)} & \makecell[l]{Keine Basisstation und auch\\keine Verbindung zu weiterem\\Internet. Muss durch mehrere\\drahtlose Geräte: \textit{MANET}, \textit{VANET}}  \\
\end{tabular}

\textbf{Herausforderungen bei drahtloser Übertragung}
\begin{itemize}
	\setlength\itemsep{-1em}
	\item Teilnehmer zeitweise nicht erreichbar (Funkloch)
	\item IP-Adresse ändert sich
	\item Höhere Anzahl an Übertragungsfehlern durch Inteferenz (Störung durch andere Teilnehmer) oder Dämpfung $\rightarrow$ Bessere Fehlerbehandlung
	\item Kurzer Paketverlust führt bei TCP zu angeblicher Netzüberlastung (obwohl nur kurzzeitige Störung)
	\item Medium kann abgehört werden
	\item Mehrwege-Ausbreitung: Signale werden an unterschiedlichsten Oberflächen reflektiert $\rightarrow$ Am Empfänger sowohl konstruktive als auch destruktive Überlagerung möglich
\end{itemize}
$\Rightarrow$ Funkkanal ist zeit- und ortsvariant!
\par

\textbf{Modulationsarten:} Frequenz-, Amplituden- \& Phasenmodulation, Quadraturamplitudenmodulation (QAM) $\Rightarrow$ Kombination von Amplituden- und Phasenmodulation (\textit{QAM-8:} 3 Bit pro Symbol, \textit{QAM-1024:} 10 Bit pro Symbol).\\
Höhere Modulationsarten bieten höhere Übertragungsrate sind aber fehleranfälliger. Bei größerem Signal-Rausch-Abstand\\
(SNR - Stärke des Nutzsignals bezogen auf Störung) kann höhere Modulation eingesetzt werden da Kanal anscheinend nicht so stark gestört (\textit{QAM-16 = 4Mbps}, \textit{QAM-256 = 8Mbps})\\
\textbf{Bit-Error-Rate (BER):} Wahrscheinlichkeit, dass ein fehlerhaftes Bit übertragen wird.\\
\textbf{Hidden Terminal Problem:} Teilnehmer A, B \& C. A und B hören sich, B und C hören sich aber A und C hören sich nicht $\rightarrow$ Bei Übertragung $A\rightarrow B$ und $C\rightarrow B$ stören sie sich unbewusst gegenseitig.\\
TODO: BEHEBUNG / VERMINDERUNG DURCH?\\

\textbf{Aufteilen eines Mediums:}
\begin{itemize}
	\setlength\itemsep{-0.5em}
	\item TDMA (Time Division Multiple Access)
	\vspace{-1em}
	\begin{enumerate}[itemsep=-1em]
		\item synchron: Jeder Teilnehmer hat festen Zeitslot, nur in diesem kann er senden
		\item asynchron: keine festen Zeitslot, jeder nutzt aktuellen Zeitslot wenn er Daten hat - Absender wird in Header geschrieben
	\end{enumerate}
	\newpage
	
	\item FDMA (Frequency Division Multiple Access)
	\vspace{-1em}
	\begin{enumerate}[itemsep=-1em]
		\item Teilnehmer nutzen unterschiedliche Frequenzen
	\end{enumerate}
	\item CDMA (Code Division Multiple Access)
	\vspace{-1em}
	\begin{enumerate}[itemsep=-1em]
		\item Teilnehmer nutzen unterschiedliche Spreizcodes, \textbf{Vorteil:} Störungsunempfindlicher, \textbf{Nachteil:} Mehr Datenübertragung
		\item Zu übertragende Daten werden vom Sender mit Spreizcode multipliziert, Ergebnisbits $\Leftrightarrow$ \textbf{Chips}
		\item Empfänger multipliziert empfangende Daten mit Spreizcode des Senders
		\item Teilnehmer senden zur gleichen Zeit im gleichen Band, Daten werden beim Empfänger durch bitweise Multiplikation mit Code zurückgewonnen
		\item \text{Andere Teilnehmer wirken als zusätzliches Rauschen ($\Rightarrow$ Umso mehr Teilnehmer umso geringerer SNR $\Rightarrow$ Sendeleistung erhöhen)}
	\end{enumerate}
\end{itemize}

\textbf{CDMA - Beispiel zur Kodierung}\\
Sender hat Spreizcode $(1, 1, 1, -1, 1, -1, -1, -1)$ und versendet Daten $d_1=-1, d_0=1$. Nach Multiplikation der Daten mit Spreizcode:\\
$Z_{1,m}=(-1, -1, -1, 1, -1, 1, 1, 1)$, $Z_{0,m}=(1, 1, 1, -1, 1, -1, -1, -1)$. Der Empfänger dekodiert folgendermaßen: $\frac{\sum_{m=1}^{M}Z_{i,m}\cdot c_m}{M}$.\\
Dabei ist $M$ Länge des Spreizcodes (in diesem Beispiel 8), $c_m$ Spreizfaktor an der Stelle $m$, $Z_{i,m}$ die gespreizten Daten, d.h:\\
$d_1=\frac{(-1)\cdot 1 + (-1)\cdot 1 + (-1)\cdot 1 + 1\cdot (-1) + (-1)\cdot 1 + 1\cdot (-1) + 1\cdot (-1) + 1\cdot (-1)}{M} = \frac{-8}{8} = -1$\\
$d_0 = \frac{1\cdot 1 + 1\cdot 1 + 1\cdot 1 + (-1)\cdot (-1) + 1\cdot 1 + (-1)\cdot (-1) + (-1)\cdot (-1) + (-1)\cdot (-1)}{M} = \frac{8}{8} = 1$\\
Bei mehreren Sendern multipliziert der Empfänger das überlagerte Signal mit dem jeweiligen Spreizcode, da diese orthogonal zueinander sind, kommen die richtigen Daten des jeweiligen Senders wieder raus.
\par

\subsection{Wireless Local Area Networks}
\textbf{Protokollstack:}\\
\vspace{-.5em}
\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.33]{images/wlan_protokollstack.png}} &
	\makecell[l]{\textbf{802.11:} '97, FHSS/DSSS, 1-2MBit/s, 2.4 GHz\\ \textbf{802.11b:} '99, DSSS, 1 - 11MBit/s, 2.4 GHz\\ \textbf{802.11n:} '09, OFDM/MIMO, 6 - 600MBit/s, 2.4 oder 5 GHz\\ \textbf{802.11ac:} '14, MU-MIMO, bis zu 6.93 GBit/s, 5 GHz\\ \textbf{802.11ay:} '19, 20 - 40 GBit/s, 60GHz}\\
\end{tabular}
\par

\textbf{Begriffe:}
\vspace{-1em}
\begin{itemize}
	\setlength\itemsep{-1em}
	\item \textbf{Basic Service Set (BSS):} Stationen die auf dem gleichen Übertragungskanal Daten austauschen
	\item \textbf{Extended Service Set (ESS):} Zusammenschluss mehrerer BSS zu Kommunikationsnetz, Roaming zwischen den BSS
	\item \textbf{Service Service Set ID (SSID):} Name des Netzwerkes
	\item \textbf{Ad-Hoc Mode / Independent BSS (IBSS):} Alle Stationen gleichberechtigt, kein Access Point
	\item \textbf{Infrastructure BSS:} Geräte kommunizieren über AP (=Übergang zu drahtgebundenem Netz)
\end{itemize}

\textbf{Kanäle:}\\
\vspace{-.5em}
\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.36]{images/wlan_kanal_ueberlappung.png}} &
	\makecell[l]{$\circ$ Bis zu 13 Kanäle mit je 5 MHz zwischen 2410 MHz - 2483 MHz.\\$\circ$ Bei \textbf{DSSS} Kanalbreite = 22MHz, bei \textbf{OFDM} = 20 MHz / 40 MHz\\ (ohne / mit Kanalbündelung). Störungsfreier Betrieb nur bei passendem\\
	Abstand (5 Kanäle bei DSSS).\\
	\textbf{Hierzu bitte auch das erste Übungsblatt vom Praktikum durchlesen!}}\\
\end{tabular}

Accesspoint sendet regelmäßig \textbf{Beacon Frames} mit SSID und MAC-Adresse. Wireless Stations scannen Kanäle nach diesen Frames,\\
\text{wählen verfügbaren AP (Einstellungen \& Signalstärke) aus, führt Authentifizierung durch und erhält anschließend IP-Adresse per DHCP.}
\newpage

\begin{tabular}{ll}
	\textbf{Passives Scannen} & \textbf{Aktives Scannen}\\
	PC ist passiv, hört Kanal ab & PC sendet Probe Request\\
	APs senden \textit{Beacons} & APs senden Probe Response\\
	PC sendet Association Request an ausgewählten AP & PC sendet Association Request an ausgewählten AP\\
	AP sendet Association Response an PC & AP sendet Association Response an PC
\end{tabular}

Keine Kollisionserkennung (Collision Detection (CD)) möglich $\Rightarrow$ ACKs auf Schicht 2\\
\vspace{-.5em}
\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.3]{images/wlan_layer_2_acks.png}} &
	\makecell[l]{$\circ$ Sender wartet Zeitspanne \textit{DIFS} (Distributed Coordination Function Interframe Spacing)\\während der Medium frei sein muss\\$\circ$ Sender überträgt Daten (kein Collision Detection)\\$\circ$ Empfänger prüft CRC\\$\circ$ Empfänger sendet ACK falls CRC korrekt nach Wartezeit \textit{SIFS} (Short Interframe Spacing) (SIFS < DIFS)\\um Senden eines normalen Frames dazwischen zu verhindern außerdem Umschalten von \textit{Empfangen} auf \textit{Senden}}\\
\end{tabular}

\textbf{Carrier Sense Multiple Access / Collision Avoidance (CSMA/CA):}
\vspace{-1em}
\begin{itemize}
	\setlength\itemsep{-1.25em}
	\item Sender lauscht (\textit{Carrier Sense}) ob Medium frei (Dauer: \textbf{1 DIFS})
	\item Falls frei: \textit{random backoff} im aktuellen \textit{Contention Window} würfeln wenn mehrere Stationen gleiches DIFS abgewartet haben\\und es sonst zu Kollision käme. Nach Ablauf des random backoffs Daten übertragen
	\item \text{Falls nicht frei: Warten bis Kanal frei, wenn Kanal länger als 1 DIFS frei, dann \textit{random backoff} verringern \& anschließend Daten senden}
	\item Falls kein ACK erfolgt: Contention Window verdoppeln und Daten erneut senden
	\item Empfänger sendet ACK nach Ablauf eines \textbf{SIFS} bei korrekt erhaltenen Daten
\end{itemize}
\textbf{Nachteile CSMA/CA:} Senden dauert lange, Kollision wird nicht erkannt - ist sehr zeitaufwändig und sollte daher vermieden werden\\
Besser eine Kollision bei kurzen Kontrollpaketen als bei langen Datenpaketen $\Rightarrow$ \textbf{RTS/CTS}-Verfahren

\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.3]{images/wlan_rts_cts_sequence_chart.png}} &
	\makecell[l]{\textbf{Ablauf:}\\$\circ$ Sender reserviert Kanal mit kurzem \textbf{Request-To-Send (RTS)}-Paket,\\Kollisionen möglich aber weniger schlimm da nur kleines Paket welches\\günstig erneut gesendet werden kann\\$\circ$ Empfänger antwortet mit \textbf{Clear-To-Send (CTS)}\\$\circ$ Sender sendet Datenpaket\\$\Rightarrow$ Andere Stationen empfangen RTS \& CTS und berücksichtigen belegten Kanal\\$\Rightarrow$ Funktioniert auch bei \textit{Hidden Terminal} da CTS empfangen wird}
\end{tabular}

\textbf{WLAN Rahmenformat}\\
\begin{tabular}{ll}
	\raisebox{-.33\height}{\includegraphics[scale=0.33]{images/wlan_rahmen.png}} &
	\makecell[l]{$\circ$ Max. 2313 Bytes an Nutzdaten\\$\circ$ 3. Adresse erlaubt Umsetzung auf Ethernet-Rahmen\\$\circ$ WLAN-Reichweitenvergrößerung durch\\überlappende BSSs, IP-Adresse bleibt gleich da\\identisches Subnetz - nur AP ändert sich\\$\Rightarrow$ Switch ändert Port$\leftrightarrow$IP-Zuordnung wenn sich\\ Teilnehmer vom neuen AP meldet}
\end{tabular}

\text{\underline{Unterschied CSMA/CA$\leftrightarrow$CSMA/CD}: CSMA/CD bei Ethernet sendet \textit{JAM}-Signal, CSMA/CA erkennt keine Kollision (versucht nur zu verhindern)}
\newpage

\subsection{Personal Area Networks (PAN)}
\vspace{-1em}
Drahtlos oder drahtgebundenes (Ad Hoc) Netzwerk von Kleingeräten, oft nur wenige Meter Reichweite.

\textbf{Bluetooth}\\
\vspace{-0em}
$\circ$ Mehrfachzugriff mit TDMA, Frequenzsprungverfahren (Kanalwechsel nach jedem Zeitslot $\Rightarrow$ Robustheit gegen Störer)\\
$\circ$ Class 1: 100mW - 100m Reichweite, $\circ$ Class 2: 2.5mW - 10m Reichweite, $\circ$ Class 3: 1mW - 1m Reichweite\\
$\circ$ '99: Einführung, 732,2kbit/s $\circ$ '04: v2.0 mit bis 2.1Mbit/s $\circ$ '16: v5.0 mit IoT Erweiterungen\\
\text{$\circ$ Ad Hoc Netzwerk (keine Infrastruktur nötig) $\circ$ $\leq$ 8 aktive \& $\leq$ 255 geparkte Geräte $\circ$ Master gibt Zeit vor, gewährt Slaves, aktiviert geparkte}
\par
Bluetooth Profile\\
Profil spezifiziert Anwendung von Bluetooth für bestimmten Zweck\\

\begin{tabular}{ll}
	\raisebox{-.4\height}{\includegraphics[scale=0.3]{images/bluetooth_stack.png}} &
	\makecell[l]{$\circ$ \textbf{AT Kommando:} Kommando zur Modemsteuerung\\$\circ$ \textbf{Baseband:} Basisband, Paketformate\\$\circ$ \textbf{L2CAP:} Logical Link Control and Adaptation Protocl:\\Bietet verbindunsorientierte- und lose Dienste zwischen Baseband\\und höheren Schichten\\$\circ$ \textbf{MCAP:} Multi-Channel Adaptation Protocol\\Stellt Kontrollkanal \textit{MCL} und Datenkanäle \textit{MDL} bereit\\$\circ$ \textbf{RFCOMM:} Virtuelle, serielle Verbindungen, Emulation serieller Ports\\$\circ$ Geräte im HealthCare Bereich ursprünglich per RFCOMM angebunden\\$\Rightarrow$'08 Verabschiedung von standardisiertem \textit{Health Device Profile}\\Zwei Rollen: \textbf{Source} = Datenquelle, \textbf{Sink} = Empfänger (Smartphone)\\Verbindungsauf- und abbau, Wiederaufbau abgebrochener Verbindungen}
\end{tabular}
\par
Sensoren (z.B. Pulsmesser, Thermometer) sollen lange Laufzeit ($\Rightarrow$ geringer Stromverbrauch) aufweisen. Bluetooth 4.0 beinhaltet\\ \textit{Bluetooth Smart} (Low-Energy Profil auf Basis von einem \textit{Generic Attribute Profile} (GATT)).
\par

\textbf{ZigBee}\\
\vspace{-0em}
$\circ$ Ziel: Drahtlose Übertragung bei geringem Stromverbrauch (geringe Datenraten: 20 - 250kbit/s, selten aktiv (\textit{low duty-cycle})).\\
$\circ$ Übertragen von Sensordaten, Heim- und Gebäudeautomatisierung\\
$\circ$ \textbf{Endgerät:} Reduced Function Device \textit{RFD} - nur Teil des ZigBee Protokolls implementiert (geringere Kosten)\\
\text{$\circ$ \textbf{Router:} Full Function Device \textit{FDD}, kann Daten weiterleiten $\circ$ \textbf{Koordinator:} Gibt zusätzliche Parameter vor, koordiniert das PAN}
\par

\subsection{Zellulare Netzwerke}
\vspace{-1em}
\text{$\circ$ \textbf{1G:} Analog (A/B/C-Netz) $\circ$ \textbf{2G:} GSM ab '92, 2.5G = GPRS, 2.75G = EDGE $\circ$ \textbf{3G:} UMTS ab '03 $\circ$ \textbf{4G:} ab '14 LTE $\circ$ \textbf{5G} ab '21, Latent < 1ms}\\
\text{$\circ$ \textbf{Mobilfunkzelle:} Von Base Transceiver Station(BTS) abgedeckter Bereich $\circ$ \textbf{Air-Interface:} Untere 2 Netzwerkschichten Mobile Station $\Leftrightarrow$ BTS}
\par

\textbf{Ressourcenzuteilung in der Zelle:}\\
\text{$\circ$ \textbf{GSM:} Kombination aus FDMA \& TDMA, Spektrum wird in einzelne Frequenzkanäle, jeder Kanal wiederum in Zeitschlitze aufgeteilt}\\
$\circ$ \textbf{UMTS:} CDMA Verfahren - Unterschiedlicher Code für unterschiedliche Nutzer
\newpage

\textbf{2G Netzwerkarchitektur (GSM):}\\
\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.13]{images/gsm_netzaufbau.png}} &
	\makecell[l]{$\circ$ \textbf{Base Station Controller (BSC):} übernimmt Ressourcenzuweisung und\\Mobilitätsmanagement in einem Base Station Subsystem (BSS)\\$\circ$ \textbf{Mobile Switching Center (MSC):} Anrufauf- und Abbau, Verbindung ins\\ Festnetz, Mobilitätsmanagement\\$\circ$ \textbf{Gateway-MSC:} Vermittlungsfunktionen, Verbindung zu anderen Netzen bzw. Festnetz\\$\circ$ \textbf{PSTN:} Public Switched Telephone Network}
\end{tabular}

\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.18]{images/gsm_gprs_netzaufbau.png}} &
	\makecell[l]{$\circ$ Mit GPRS-Komponenten erstmals paketvermittelte Datendienste\\- verwendet bereits bestehende BTS mit\\$\circ$ \textbf{Packet Control Unit (PCU):} Kommuniziert über den BSC mit Endgerät und\\auch mit der SGSN, überwacht und verwaltet Datenpakete, Ressourcenverteilung\\$\circ$ \textbf{Serving GPRS Support Node (SGSN)}: Übernimmt Vermittlung der\\Datenpakete und die Funktion des VLR\\$\circ$ \textbf{Gateway GPRS Support Node (GGSN):} Ist der Router, der das\\Mobilfunknetz mit dem Internet verbindet und die IP-Adresse zur Verfügung stellt\\$\circ$ \textbf{Home Location Register (HLR):} Datenbank mit Informationen zum Nutzer,\\enthält Rufnummer und zuletzt bekannten Aufenthaltsort\\$\circ$ \textbf{Visitor Location Register (VLR):} Datenbank mit Informationen zu allen\\Nutzern, die sich im vom MSC bedienten Bereich befinden\\$\circ$ Sprachdaten laufen über $BTS\Leftrightarrow BSC\Leftrightarrow MSC \Leftrightarrow G-MSC\Leftrightarrow Festnetz$\\$\circ$ Paketdaten laufen über $BTS\Leftrightarrow BSC\Leftrightarrow PCU\Leftrightarrow SGSN\Leftrightarrow GGSN\Leftrightarrow Internet$}
\end{tabular}

\textbf{Mobilitätsmanagement:}\\
\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.3]{images/mobilitaetsmanagement.png}} &
	\makecell[l]{$\circ$ Nutzer kann sich zwischen Zellen verschiedener \textit{MSCs}, auch von anderen Providern, bewegen\\$\circ$ Mobilgerät prüft im eingeschalteten Zustand, ob sich aktuelle Location Area ändert\\$\Rightarrow$ sendet Location Update mit neuer Area $\Rightarrow$ Home Location Register (HLR) wird aktualisiert\\$\circ$ Eingehender Anruf: Befragung von \textit{HLR} nach aktuellem Ort des Angerufenen über dessen\\temporäre \textit{Roaming-Nummer}, anschließend Verbindungsaufbau über das \textit{VLR} des MSC\\$\Rightarrow$ Falls gerade keine Verbindung besteht: Broadcast-Nachricht über alle Basisstationen\\des jeweiligen MSC (\textit{Paging}), Mobile meldet sich ggf., damit genaue Basisstation bekannt}
\end{tabular}

\textbf{GSM Handover (= MSC/Inter-BSC Handover)}\\
Mobilgerät wechselt bei bestehender Verbindung von einer Basisstation zur anderen.\\
\textbf{Ursachen:} Bewegung des Nutzers (stärkeres Signal eines anderen BSS), aktuelle Zelle überlastet\\
\textbf{Ablauf Inter-BSC Handover:}
\vspace{-1em}
\begin{itemize}
	\setlength\itemsep{-1.25em}
	\item Altes BSS informiert MSC über anstehendes Handover
	\item MSC reserviert Ressourcen zu neuer BSS
	\item Neue BSS reserviert Zeitslot (TDMA)
	\item Neue BSS signalisiert an MSC und alte BSS Bereitschaft zum Handover
	\item Alte BSS weist Mobilgerät an, Handover zu neuer BSS durchzuführen
	\item Mobilgerät aktiviert Kanal in neuer BSS
	\item Mobilgerät bestätigt Handover an MSC, diese leitete Daten um
	\item MSC weist alte BSS an, Ressourcen des Mobilgeräts freizugeben
\end{itemize}
\vspace{-1em}
\textbf{Arten von Handover:}
\vspace{-1em}
\begin{itemize}
	\setlength\itemsep{-1.25em}
	\item \textit{Intra BSC:} Aktuelle und neue Zelle gehörten zum selben BSC
	\item \textit{Inter BSC:} Aktuelle und neue Zelle gehören zu unterschiedlichen BSC aber gleichen MSC
	\item \textit{Inter MSC:} Aktuelle und neue Zelle gehören zu unterschiedlichen MSC
	\item \textit{Subsequent Inter MSC:} Teilnehmer wechselt nach \textit{Inter MSC} in Zelle eines dritten MSC
	\item \textit{Subsequent Handback:} Teilnehmer wechselt nach \textit{Inter MSC} zurück in Gebiet des ersten MSC
\end{itemize}
\newpage

\textbf{Ablauf Inter-MSC Handover:}\\
\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.3]{images/inter_msc_handover.png}} &
	\makecell[l]{$\circ$ Anker-MSC = erste MSC während eines Anrufs\\$\circ$ Daten bzw. der Anruf wird zunächst an Anker-MSC geleitet\\$\circ$ Dann Weiterleitung zu aktueller MSC}
\end{tabular}\\
\vspace{-0em}
\textbf{3G Netzarchitektur:}\\
\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.225]{images/3g_netzarchitektur.png}} &
	\makecell[l]{$\circ$ Mit UMTS '99 neues Air-Interface \textit{Universal Terrestrial Radio Access Network} (\textbf{UTRAN})\\$\circ$ basierend auf Wideband-CDMA\\$\circ$ Ab UMTS v4 Umstellung auf IP basierte Kommunikation (Sprache \& Daten)}
\end{tabular}\\
\vspace{-0em}
\textbf{LTE \& LTE Advanced (4G):}\\
\text{Umstellung auf \textit{Orthogonal Frequency Devision Multiplexing} (\textbf{OFDM}): Übertragungstechnik mit flexibler Bandbreite zwischen 1.25 bis 20 MHz}\\
\text{LTE-Endgerät muss Mehrantennenverfahren unterstützen (\textit{Multiple Input, Multiple Output} \textbf{MIMO}), LTE-Netz rein paketbasiert (Sprache per VoIP)}

\vspace{-1em}
\subsection{Long Term Evolution (LTE, LTE-A)}
\vspace{-1.5em}
\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.2]{images/long_term_evolution.png}} &
	\makecell[l]{$\circ$ \textbf{LTE + 2 Releases}: \textit{LTE Advanced} - 3 Gbit/s DL bzw. 1.5 Gbit/s UL, Bündelung bis zu 5 Carrier\\$\circ$ \textbf{LTE + 3/4 Releases:} \textit{LTE Advanced Pro} - Bündelung von bis zu 32 Carriern, QAM-256,\\LTE Narrow Band IoT, \textbf{5G} Standardisierung läuft\\$\circ$ \textbf{Packet Data Network Gateway:} Internetschnittstelle\\$\circ$ \textbf{Mobility Management Entity:} Mobilitätsmanagement\\$\circ$ \textbf{Serving-Gateway:} Weiterleitung von Nutzdaten ins Kernnetz\\$\circ$ \textbf{Home Suscriber Service:} entspricht HLR bei GSM\\$\circ$ \textbf{evolved Node-B (eNode-B):} Basisstation}
\end{tabular}\\

\vspace{-1em}
\subsection{5G}
\vspace{-1.5em}
\text{\textbf{Enhanced Mobile Broadband (eMBB):} Hohe Datenraten, \textbf{Massive Machine Type Communications (mMTC):} IoT Anwendungen}\\
\textbf{Ultra-Reliable and Low-Latency Communication (uRLLC):} z.B. drahtlose Vernetzung in der Produktion\\
\textbf{5G New Radio:} Nutzung mehrerer Antennen (\textit{MIMO}), mmWave-Bänder (24 - 30GHz), flexible und kürzere Slotzeiten (<1ms)\\
\textbf{Ziele:} E2E Latenz < 1ms, 1000x höheres Datenvolumen, 10-100x mehr Geräte, 10-100x mehr typische Nutzerdatenraten\\
\textbf{Umsetzung:} 5G Zellen mit LTE-Kernnetz (non-standalone), 2-3Gbit/s $\Rightarrow$ 5G mit 5G-Kernnetz (standalone), mmWave Bänder

\vspace{-1em}
\subsection{Zusammenfassung Drahtlose Netzwerke}
\vspace{-1.5em}
\text{Ersetzen der unteren 2 Schichten (Link- \& Physical-Layer) durch drahtlose Varianten $\Rightarrow$ Auswirkungen auf obere Schichten minimal, aber:}\\
$\Rightarrow$ Fehlinterpretation von Paketverlusten auf drahtlosem Link von TCP führt zu Congestion Window Veringerrung $\Rightarrow$ Datenrate sinkt\\
\text{$\Rightarrow$ Verzögerung durch Link-Layer Retransmission (Auswirkungen auf Echtzeitanwendungen), Drahtloser Link meist geringere Datenrate}

\newpage

\section{Security}
\vspace{-1.5em}
\subsection{Grundlagen}
\vspace{-1.5em}

$\circ$ \textbf{Vertraulichkeit:} Nur Sender und rechtmäßige Empfänger sollen die Nachricht verstehen können\\
$\circ$ \textbf{Integrität:} Sicherstellen, dass Nachricht unverändert ist (ob durch Übertragungsfehler oder Angriff)\\
$\circ$ \textbf{Authentisierung:} Nachweis, dass eine Person diejenige ist, die sie vorgibt zu sein\\
$\circ$ \textbf{Authentifizierung:} Sicherstellen, dass Kommunikationspartner derjenige ist, für den er sich ausgibt (Prüfung der \textit{Authentisierung})\\
$\circ$ \textbf{Authorisierung:} Nachweis von speziellen Rechten\\
$\circ$ \textbf{Betriebssicherheit:} Absicherung des Firmennetzes gegen Eingriffe von außen

\vspace{-1.5em}
\subsection{Grundlagen der Kryptographie}
\vspace{-1.5em}

\textbf{Arten von Verschlüsselung}\\
\hspace*{5mm}\text{$K_A$: Schlüssel für Verschlüsselung, $K_B$:  Schlüssel für Entschlüsselung, $m$: Klartext, $K_A(m):$ Ciphertext - Klartext verschlüsselt mit $K_A$}\\
\hspace*{10mm}$m=K_B(K_A(m))$\\
\vspace{-2.5em}
\begin{itemize}
	\setlength\itemsep{-1.25em}
	\item \textbf{Symmetrisch:} $K_A$ identisch zu $K_B$, Verfahren z.B. \textit{AES}
	\item \textbf{Public Key:} Paar unterschiedlicher Schlüssel: $K_A = K_B^+$ und $K_B^-$, ein Schlüssel ist beiden bekannt (\textit{public key} - $K_B^+$), der andere nur Empfänger (\textit{private key} - $K_B^-$), Verfahren z.B. \textit{RSA}
\end{itemize}

\vspace{-1em}
\textbf{Arten von Angriffen}\\
\vspace{-2.5em}
\begin{itemize}
	\setlength\itemsep{-1.25em}
	\item \text{\textbf{Cipher-Text only:} Angreifer hat nur Geheimtext, entweder alle möglichen Schlüssel ausprobieren (\textit{brute force}) oder statistische Analyse}
	\item \textbf{Known-Plaintext:} Angreifer kennt Klar- und zugehörigen Geheimtext, kann Rückschlüsse auf Schlüssel ziehen
	\item \text{\textbf{Chosen-Plaintext:} Angreifer kann Geheimtext zu selbstgewählten Klartext bekommen, Verschlüsselungsalgorithmus ggf. ausnutzbar}
\end{itemize}

\vspace{-1em}
\textbf{Einfache symmetrische Verschlüsselungen}\\
\vspace{-2.5em}
\begin{itemize}
	\setlength\itemsep{-1.25em}
	\item \textbf{Cesar-Chiffre:} Verschiebung des Alphabets als Schlüssel, Abbildung des Klartextes auf verschobenes Alphabet ergibt Ciphertext
	\item \textbf{Substitutions-Chiffre:} Schlüssel ist eine Abbildungsvorschrift (Buchstabe $b$ wird abgebildet auf $b'$)
	\item \textbf{Blockchiffre:} Verarbeitung des Klartextes in $k$-Bit großen Blöcken (d.h. Abbildung eines $k$-Bit Blocks auf $k$-Bit Geheimtext)\\
	\hspace*{10mm}z.B. $k=3:$ \textcolor{gray!90}{000 $\Rightarrow$ 110}, 001 $\Rightarrow$ 111, \textcolor{gray!90}{010 $\Rightarrow$ 101}, 011 $\Rightarrow$ 100, \textcolor{gray!90}{100 $\Rightarrow$ 011}, 101 $\Rightarrow$ 010, \textcolor{gray!90}{110 $\Rightarrow$ 000}, 111 $\Rightarrow$ 001\\
	\text{Der Schlüssel ist die Abbildungstabelle, Anzahl möglicher Abbildungen: $(2^k)!$, d.h. für $k=3$ gibt es $8!$, also 40320, Abbildungsmöglichkeiten}\\
	\text{$\Rightarrow$ Heutige Blockchiffren (\textit{DES}, \textit{3DES}, \textit{AES}) verwenden Funktionen um Abbildungen zu erzeugen da bereits kleine $k$ riesige Tabellen erzeugen}
\end{itemize}

\vspace{-1em}
\textbf{Cipher Block Chaining}\\
\vspace{-2.5em}
\begin{itemize}
	\setlength\itemsep{-1.25em}
	\item Identischer Klartext produziert identischen Geheimtext\\
	\hspace*{5mm} $\Rightarrow$ Rückschlüsse auf Schlüssel möglich, daher bitweise $XOR$-Operation mit 
	zufälligem Bitmuster auf Klartext
	\item Identischer Klartext erzeugt nun anderen Geheimtext, Empfänger benötigt zum Entschlüsseln das zufällige Bitmuster
	\item Um nicht doppelt so viele Daten (Geheimtext + Zufallsmuster) versenden zu müssen wird \textit{Cipher Block Chaining} angewandt\\
	\hspace*{5mm}$\Rightarrow$ Nur das erste zufällige Bitmuster (\textit{Initialization Vector} \textbf{VI}) wird unverschlüsselt an Empfänger gesendet\\
	\hspace*{5mm}$\Rightarrow$ Danach ist vorhergehender Geheimtext das zufällige Bitmuster für den nächsten Block Klartext
	\item Für $c=$ Ausgegebener Geheimtext (\textit{Cipher}) $K=$ Schlüssel, $m=$ Klartext ist der Verlauf dann wie folgt:\\
	\hspace*{5mm}$c(0)=$ Initialisierungsvektor\\
	\hspace*{10mm}$c(1)=K(m_1$ $XOR$ $c(0))$ \\
	\hspace*{15mm}$c(2)=K(m_2$ $XOR$ $c(1))$ \\
\end{itemize}

\vspace{-2em}
\textbf{Data Encryption Standard (DES):}\\
\text{56-Bit symmetrischer Schlüssel, Verarbeitung von 64-Bit Blöcken mit \textit{Cipher Block Chaining}, per \textit{Brute Force} knackbar, \textit{3DES} etwas sicherer}\\

\vspace{-2em}
\textbf{Adanved Encryption Standard (AES):}\\
Nachfolger von \textit{DES}, 128/192 oder 256-Bit symmetrischer Schlüssel mit 128-Bit Blöcken, AES-256 kann nicht geknackt werden\\

\vspace{-2em}
\textbf{Public Key (asymmetrische) Verschlüsselung:}\\
\vspace{-2.5em}
\begin{itemize}
	\setlength\itemsep{-1.25em}
	\item Öffentlicher Schlüssel $K_B^+$ wird zur Verschlüsselung verwendet,  Privater Schlüssel $K_B^-$ zur Entschlüsselung
	\item Öffentlicher Schlüssel sowohl Empfänger als auch Sender bekannt, privater Schlüssel ist aber nur Empfänger bekannt
	\item Sender überträgt $K_B^+(m)$, Empfänger entschlüsselt mit $K_B^-(K_B^+(m))$, d.h. es muss gelten $K_B^-(K_B^+(m)) = m$
	\item Man darf nicht vom öffentlichen auf den privaten Schlüssel schließen können
\end{itemize}
\newpage

\textbf{RSA Algorithmus:}\\
$\circ$ Text wird als Bitmuster angesehen, die Verschlüsselung ergibt wieder ein Bitmuster - den Geheimtext\\
$\circ$ RSA nutzt modulare Arithmetik und die Tatsache, dass Teilerbestimmung einer gegebenen Zahl sehr rechenaufwändig sind\\
$\circ$ Verschlüsselung mit public key ist allerdings auch sehr rechenaufwändig, da z.B. $m^e$ berechnet wird (e = öffentlicher Schlüssel)\\
$\circ$ Symmetrische Verschlüsselung wesentlich schneller $\Rightarrow$ Asymmetrische Verschlüsselung zum Aufbau einer sicheren Verbindung\\
\hspace*{5mm}$\rightarrow$ danach mit einem zweiten Schlüssel symmetrische Verschlüsselungen austauschen\\
\text{\hspace*{5mm}$\rightarrow$ Teilnehmer A \& B verwenden RSA um symmetrischen Schlüssel $K_S$ auszutauschen, danach symmetrische Verschlüsselung (\textit{AES}) mit $K_S$}\\

\vspace{-2.5em}
\textbf{Integrität einer Nachricht sicherstellen}\\
$\circ$ Berechnen einer Prüfsumme (\textit{Hash}) über Nachricht + gemeinsames Geheimnis (ansonsten könnte Angreifer die Nachricht verändern und dann erneut eine gültige Prüfsumme über die veränderte Nachricht berechnen), Empfänger berechnet Hash selbst und überprüft ihn mit übertragenem Hash\\

\vspace{-2.5em}
\textbf{Kryptographische Hashfunktionen}\\
\text{$\circ$ Berechnung eines Strings $H(m)$ fester Größe aus Nachricht $m$, vom Rechenaufwand her nicht möglich, Kollision zu erzeugen, so dass $H(x) = H(y)$}\\
\text{$\circ$ \textit{MD5} mit 128-Bit Hash (unsicher) $\circ$ \textit{SHA-1} mit 160-Bit Hash (inzwischen auch kritisch) $\circ$ \textit{SHA-2} mit 224/256/384/512-Bit Hash (empfohlen)}\\

\vspace{-2.5em}
\textbf{Message Authentication Code (MAC)}\\
$\circ$ Gemeinsames Geheimnis besteht aus \textit{Authentication Code} $s$ und Nachricht $m$, Sender hängt $H(m+s)$ (=MAC) an Nachricht $m$ an\\
\text{$\circ$ Übertragung von Nachricht + MAC an Empfänger, dieser berechnet ebenfalls Hash aus $m$ + $s$ und prüft, ob gesendeter MAC passt}\\

\vspace{-2.5em}
\textbf{Digitale Signaturen}\\
$\circ$ Unterschrift als Bestätigung der Urheberschaft eines Dokuments, MAC mit \textit{shared key} \textbf{s} ungeeignet, da \textbf{s} sowohl Unterzeichner als auch Prüfer bekannt sein muss $\Rightarrow$ Prüfer kann Unterschrift fälschen\\
$\circ$ Lösung:\\
\hspace*{5mm} Berechne $H(m)$, $m$ := zu unterschreibende Nachricht\\
\hspace*{10mm} Unterzeichner nutzt private key zur Berechnung von $K_B^-(H(m))$, wird zusammen mit $m$ versendet\\
\hspace*{15mm} Prüfer prüft ob $H(m) = K_B^+(K_B^-(H(m)))$ (entschlüsseln mit öffentlichem Schlüssel), falls ja: Unterschrift gültig\\

\vspace{-2.5em}
\textbf{Zertifizierung von öffentlichen Schlüsseln}\\
\text{$\circ$ Angreifer kann behaupten, dass dessen public key gleich dem vom Unterzeichner ist $\Rightarrow$ Öffentlicher Schlüssel muss Person zugeordnet werden}\\
$\circ$ \textit{Certification Authority} (\textbf{CA}) prüft Identität (z.B. Personalausweis) - erstellt Zertifikat, dass public key zur Person gehört (Angabe der Domain) und unterschreibt das Zertifikat per digitale Signatur\\
$\circ$ Unterzeichner sendet eigenen public key und Zertifikat an Empfänger, dieser prüft mit öffentlichem \textbf{CA}-Schlüssel, ob Zertifikat gültig (d.h. public key richtig) ist\\

\vspace{-2.5em}
\textbf{Authentifizierungsprotokoll mit Shared Secret}\\
$\circ$ Kommunikationsteilnehmer prüft, ob ein anderer derjenige ist, für den er sich ausgibt\\
\hspace*{5mm}IP-Adresse kann gefälscht sein oder Angreifer führt Playback-Angriff durch (Kommunikation aufzeichnen \& wieder abspielen)\\
\text{Lösungen: \textit{shared secret} oder Verwendung einer nur einmal verwendeten, zufälligen Zahl (\textit{Nonce}) die mit symmetrischem Schlüssel verschlüsselt wird}\\
\vspace{-2.75em}
\begin{itemize}
	\setlength\itemsep{-1.25em}
	\item Sender sendet eigenen Namen an Empfänger
	\item Empfänger sendet Nonce $R$ zurück
	\item Sender sendet mit eigenem privaten Schlüssel verschlüsseltes $R$
	\item Empfänger fordert publick key an
	\item Sender sendet public key (ggf. mit Zertifikat einer CA) an Empfänger
	\item Empfänger prüft ob $K_A^+(K_A^-(R)) = R$
\end{itemize}

\vspace{-1.5em}
\subsection{Secure Sockets Layer (SSL)}
\vspace{-1.5em}
\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.25]{images/ssl_layerstack.png}} &
	\makecell[l]{$\circ$ Viele TCP-basierte Anwendungen benötigen \textbf{Vertraulichkeit}, \textbf{Integrität}, \textbf{Authentifizierung}\\$\circ$ Keines der Internet-Transportprotokolle unterstützt Verschlüsselung übertragener Informationen\\$\circ$ Auf Anwendungsschicht implementiert (z.b. \textit{java.net.ssl} oder \textit{OpenSSL})\\$\circ$ SSL stellt diese Funktionalitäten durch Verschlüsselung, Message Authentication Code und mit Zertifikaten zur Verfügung\\$\circ$ SSL v3.1 von \textit{IETF} als \textbf{Transport Layer Security TLS 1.0} standardisiert\\$\circ$ Drei Phasen: Handshake, Key Derivation (Herleitung von Schlüsseln), Data Transfer (eigentliche Datenübertragung)}
\end{tabular}

\newpage

\text{\textbf{SSL Handshake:} Webbrowser als Client, Server besitzt public \& private key + Zertifikat für public key zur Identitätsbestätigung (Domainname)}\\
\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.25]{images/ssl_handshake.png}} &
	\makecell[l]{$\circ$ TCP-Verbindung aufbauen\\$\circ$ Client sendet Liste an unterstützten \textit{SSL  Cipher Suites} + Nonce\\$\circ$ Server sendet Wahl der \textit{Cipher Suite}, CA-Zertifikat und Server-Nonce\\$\circ$ Client:\\
		\hspace*{5mm}- prüft Server-Zertifikat\\
		\hspace*{5mm}- generiert \textit{Pre-Master Secret} \textbf{(PMS)}\\
		\hspace*{5mm}- sendet mit Public Key des Servers verschlüsseltes PMS an den Server\\
		$\circ$ Client \& Server leiten mit \textit{KDF} aus PMS und Nonces das \textit{Master Secret} (\textbf{MS}) her\\
		\hspace*{5mm}- Empfänger verschlüsselt \textit{MS} mit public key des Servers =\textbf{EMS}\\
		$\circ$ Aus \textit{MS} werden die Schlüssel $E_A, E_B, M_A, M_B$ hergeleitet\\\hspace*{5mm}\textbf{$\Rightarrow$ Nun alle Nachrichten verschlüsselt + MAC authentifiziert}\\
		$\circ$ Client sendet \textit{MAC} aller Handshake-Nachrichten, die vom Server überprüft werden\\
		$\circ$ Server sendet \textit{MAC} aller Handshake-Nachrichten, die vom Client überprüft werden\\\hspace*{5mm}\textbf{$\Rightarrow$ Verhinderung von z.B. Wahl einer schwächeren Cipher Suite}}
\end{tabular}\\

\vspace{-1.5em}
\textbf{SSL Key Derivation}\\
$\circ$ Statt \textit{Master Secret} direkt als Schlüssel zu verwenden werden aus Sicherheitsgründen vier unterschiedliche Schlüssel aus einer\\\textit{Key Derivation Function} \textbf{KDF} mit Eingabeparametern Master Secret und Zufallsdaten, abgeleitet (nur für eine Sitzung gültig):\\
\hspace*{5mm}$E_B$: Verschlüsselung Client $\rightarrow$ Server\\
\hspace*{5mm}$M_B$: MAC zur Integritätsprüfung der Daten von Client $\rightarrow$ Server\\
\hspace*{5mm}$E_A$: Verschlüsselung Server $\rightarrow$ Client\\
\hspace*{5mm}$M_A$: MAC zur Integritätsprüfung der Daten von Server $\rightarrow$ Client\\

\vspace{-2.5em}
\textbf{SSL Datenübertragung}\\
\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.2]{images/ssl_reordering.png}} &
	\makecell[l]{$\circ$ Aufteilung des TCP-Byte-Stroms in separate Abschnitte (\textit{SSL Records})\\
		$\circ$ Jeder Record enthält zusätzliche Sequenznummer (beginnend bei 0) um\\\hspace*{5mm}Reordering von Records verhindern\\
		$\circ$ \textit{MAC} wird berechnet über Daten + MAC-Schlüssel ($M_A$ oder $M_B$) + Sequenznummer\\
		$\circ$ Nutzung von \textit{Nonces} verhindert Replay-Angriff (Wiederabspielen einer Datenverbindung)}
\end{tabular}\\

\vspace{-1.5em}
\textbf{SSL Record}\\
\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.11]{images/ssl_record.png}} &
	\makecell[l]{$\circ$ \textbf{Type:} Unterscheidung von Handshake/Nutzdaten/Beenden\\$\circ$ \textbf{Version:} SSL-Versionsnummer\\$\circ$ \textbf{Length:} Länge der Daten (ohne Header) - Extraktion aus dem TCP-Byte Strom}
\end{tabular}\\

\vspace{-1.5em}
\textbf{SSL Cipher Suites}\\
$\circ$ Enthält Algorithmus für: \textit{Public Key} Verschlüsselung, \textit{symmetrische} Verschlüsselung und für \textit{Message Authentication Code}\\
\text{$\circ$ Client bietet Reihe von \textit{SSL Cipher Suite}s an (vom Client favorisierte ganz oben), Server sucht eine aus (unabhängig von Clientpriorität)}\\
\begin{tabular}{l|l|l}
	\textbf{Symmetrisch} & \textbf{Public Key} & \textbf{MAC}\\
	\hline
	DES, 3DES, AES & RSA, DH (Diffie-Hellmann), ECDH (Elliptic-Curve DH) & SHA-1, SHA-2, MD5
\end{tabular}
\par

\vspace{-.5em}
\textbf{Vorzeitiges Schließen einer SSL-Verbindung}\\
$\circ$ Wird durch zusätzlichen \textit{SSL-Record} zum ordnungsgemäßen Beenden verhindert (Authentifizierung erfolgt über \textit{MAC})

\vspace{-1.5em}
\subsection{TLS v1.3}
\vspace{-1.5em}

$\circ$ Ciphersuite-Konzept geändert: MAC berechnen \& Verschlüsselung erfolgt nun in einem Schritt\\
$\circ$ Verbindungsaufbau (\textit{full handshake}) von 2 RTT auf 1 RTT verringert, \textit{0-RTT}-Mode: Daten bereits in erster Nachricht enthalten\\
$\circ$ Verhindern von Downgrades durch Signierung der Liste an Verschlüsselungsverfahren, unsichere kryptographische Verfahren entfallen\\
$\circ$ \textbf{Perfect Forward Secrecy:} Kommunikationspartner generieren nur für diese Verbindung gültige Kurzzeitschlüssel,\\
\hspace*{2.5mm}die nach Verbindungsende verworfen werden und nicht aus Langzeitgeheimnis rekonstruiert werden können

\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.33]{images/tls_13_zero_rtt.png}} &
	\makecell[l]{$\circ$ \textit{0-RTT Mode:}\\\hspace*{2.5mm}Client \& Server teilen \textit{Pre-shared Key}\\\hspace*{2.5mm}z.B. aus vorheriger Verbindung, und können\\\hspace*{2.5mm}diesen gleich zur Authentifizierung und\\\hspace*{2.5mm}Verschlüsselung der \textit{Early Data} verwenden\\\hspace*{2.5mm}\textbf{allerdings:} Kein \textit{Forward Secrecy},\\\hspace*{19mm}anfälliger ggü. Replay-Attacken}
\end{tabular}\\

\vspace{-1.5em}
\subsection{Enterprise Transport Security (ETS)}
\vspace{-1.5em}

\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.275]{images/ets_middleboxes.png}} &
	\makecell[l]{$\circ$ Unternehmensnetze setzen viele Middleboxes zur Angriffserkennung\\\hspace*{2.5mm}(\textit{Intrusion Detection}) oder als Application Layer Firewall ein,\\
		\hspace*{2.5mm}Datenverkehr kann aufgrund von \textit{Perfect Forward Secrecy} nicht\\\hspace*{2.5mm}entschlüsselt werden $\rightarrow$ keine Überwachung durch Middleboxen möglich\\
		\hspace*{2.5mm}$\Rightarrow$ Verzicht auf \textit{Perfect Forward Secrecy}, TLS 1.3 wird um statisches\\
		\hspace*{7mm}Diffie-Hellmann Schlüsselpaar zwischen Middlebox und\\
		\hspace*{7mm}Unternehmensserver erweitert\\}
\end{tabular}\\

\vspace{-1.5em}
\subsection{Virtual Private Networks (VPN)}
\vspace{-1.5em}
$\circ$ Stellt über ein öffentliches, ggf. unsicheres, Netzwerk eine gesicherte, private Vernetzung zwischen Endgeräten her\\
$\circ$ Zur Anbindung von auswärtigen Standorten, externen Partnern oder Mitarbeitern (\textit{Remote Access})\\
$\circ$ Implementierung auf verschiedenen Schichten möglich (Transportschicht: \textit{Cisco-Client}, Netzwerk-Schicht (IP): \textit{IPSec})\\

\vspace{-1.5em}
\includegraphics[scale=0.24]{images/vpn.png}
\par

\vspace{-1em}
\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.33]{images/vpn_tunneling.png}} &
	\makecell[l]{$\circ$ \textbf{Tunneling:} Weiterleitung beliebiger Datenpakete über unsicheres Transitnetz\\$\circ$ VPN nutz eigenen Adressraum\\$\circ$ $A,B,C$ := VPN-Adressraum, $\lambda, \mu$ := Internet-Adressraum\\$\circ$ \textbf{Authentisierung}:\\\hspace*{2.5mm}\textit{Password Authentication Protocol} \textbf{PAP} - unsicher da Klartextaustausch\\\hspace*{2.5mm}\textit{Challenge Handshake Authentication Protocol} \textbf{CHAP} - Challenge-Response\\$\circ$ \textbf{Software:}\\\hspace*{2.5mm}Server (VPN-Gateway) per VPN-Server Software\\\hspace*{2.5mm}Client per VPN-Client (Cisco) / VPN-Adapter\\$\circ$ \textbf{Protokolle:}\\\hspace*{2.5mm}\textit{Point-to-Point Tunnelling Protocol} \textbf{PPTP}\\\hspace*{2.5mm}\textit{Layer Two Tunnelling Protocol} \textbf{L2TP} (\textit{PPTP}-Nachfolger)\\\hspace*{2.5mm}\hspace*{2.5mm}- Tunnelt beliebige Pakete über UDP}
\end{tabular}\\

\newpage

\subsection{IPSec}
\vspace{-1.5em}
$\circ$ Dominierendes Protokoll für \textit{VPN}s auf Netzwerkschicht, verschiedene Verfahren:\\
\vspace{-2.75em}
\begin{itemize}
	\setlength\itemsep{-1.25em}
	\item \textit{Authentication Header} \textbf{(AH)}\\
	\hspace*{2.5mm}- Garantiert Integrität der übertragenen Daten, Authentifizierung der Quelle eines Paketes (\textbf{keine} Verschlüsselung)\\
	\hspace*{2.5mm}\textbf{Header:}\\
	\hspace*{2.5mm}\hspace*{2.5mm}- \textit{Integrity Check Value} (\textbf{ICV}): \textit{HMAC} (Hash über Nutzdaten + Geheimnis) über IP-Paket\\
	\hspace*{2.5mm}\hspace*{2.5mm}- \textit{Security Parameter Index} (\textbf{SPI}): Index auf eine \textit{Security Association} (kommt später)\\
	\hspace*{2.5mm}\hspace*{2.5mm}- \textit{Sequence Number} (\textbf{SN}): Steigende Nummer zum Schutz vor \textit{Replay}-Attacken
	\item \textit{Encapsulated Security Payload} \textbf{ESP}\\
	\hspace*{2.5mm}- Vertraulichkeit der Daten durch symmetrische Verschlüsselung + zusätzliche Authentifizierung der Quelle eines Paketes\\
	\hspace*{2.5mm}\textbf{Header:}\\
	\hspace*{2.5mm}\hspace*{2.5mm}- Ebenfalls \textit{ICV} (hier wird äußerer IP-Header \textbf{nicht} mit einbezogen), \textit{SPI} und \textit{SN}\\
	\hspace*{2.5mm}\hspace*{2.5mm}- \textit{Initialization Vector} (\textbf{IV}): Initialisierungsvektor für symmetrische Verschlüsselungsverfahren\\
	\hspace*{2.5mm}\hspace*{2.5mm}- \textit{Encrypted Payload} (\textbf{Encrypted Payload}): Verschlüsselte Nutzdaten
\end{itemize}

\vspace{-1em}
\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.35]{images/ipsec_transport_tunnel_mode.png}} &
	\makecell[l]{$\circ$ \textbf{Transport Mode:} Einfügen des \textit{IPSec}-Headers in original IP-Paket\\\hspace*{2.5mm}$\Rightarrow$ Gesicherte IP-Verbindung zwischen zwei Hosts (\textit{End-to-End})\\$\circ$ \textbf{Tunnel Mode:} Kapselung des Original IP-Paketes (inkl. Header) in\\\hspace*{2.5mm}neues IP-Paket mit IPSec-Header\\\hspace*{2.5mm}$\Rightarrow$ Gesicherte Verbindung zwischen Host/Netz und Netz/Netz\\\hspace*{2.5mm}$\Rightarrow$ Im neuen IP-Header neue Src- bzw. Dest-Adressen (die Tunnelendpunkte)}
\end{tabular}\\

\vspace{-1em}
\textbf{Security Association (SA):}\\
\vspace{-2.5em}
\begin{itemize}
	\setlength\itemsep{-1.25em}
	\item (unidirektionale) Festlegung der für IPSec Kommunikation zwischen zwei IPSec-Hosts verwendeten Parameter:\\Protokoll, Modus, Verschlüsselung
	\item legen fest, \textbf{was} in \textbf{welcher Art} verschlüsselt wird
	\item Jede \textit{SA} hat eindeutigen \textit{Security Parameter Index} (\textbf{SPI})
	\item IPSec Einheit erhält die \textit{SPI}s in \textit{Security Association Database} (\textbf{SPD})
\end{itemize}

\vspace{-1em}
\textbf{Problem mit \textit{Network Address Translation} (NAT):}\\
$\circ$ \textit{NAT} ändert Port und IP-Adresse (klappt nicht, wenn die im \textit{Tunnel-Mode} verschlüsselt sind)\\
\hspace*{2.5mm}$\Rightarrow$ \textit{IPSec NAT Traversal}: UDP Datagram zum Übertragen der IPSec Pakete\\

\vspace{-2.5em}
\textbf{Internet Key Exchange (IKE):}\\
\vspace{-2.5em}
\begin{itemize}
	\setlength\itemsep{-1.25em}
	\item Automatisiertes Aushandeln der \textit{SA}s (mit Schlüssel)
	\item Basiert auf \textit{Security Association Key Management Protocol} (\textbf{ISAKMP})
	\item Variante 1: \textit{Pre-Shared Key} (\textbf{PSK})\\
	\hspace*{2.5mm}- Beide Seiten sind mit gemeinsamen Geheimnis vorkonfiguriert\\
	\hspace*{2.5mm}- \textit{IKE} wird genutzt um SAs aufzusetzen
	\item Variante 2: \textit{Public Key Infrastruktur} (\textbf{PKI})\\
	\hspace*{2.5mm}- Beiden Seiten haben Public- und Private Key + \textbf{Zertifikat}\\
	\hspace*{2.5mm}- IKE zur Authentifizierung und Aufsetzen der SAs (ähnlich SSL Handshake)
	\item Phase 1: Aufbau einer bi-direktionalen \textit{IKE} SA (\textbf{keine} IPSec SA)\\
	\hspace*{2.5mm}- Verwendet \textit{ISAKMP}, entweder im \textit{Aggressive Mode} (1.5 RTT) oder \textit{Main Mode} (3 RTT)
	\item Phase 2: Aushandlung von IPSec SA (ebenfalls mit ISAKMP), Teilnehmer signieren ihre Nachrichten
\end{itemize}

\vspace{-1.5em}
\subsection{Alternative VPN Protokolle}
\vspace{-1.5em}
$\circ$ \textbf{OpenVPN:} per \textit{OpenSSL} verschlüsselte \textit{TLS}-Verbindung (TCP/UDP), \textit{Bridge-Mode:} Layer 2 Tunnel, \textit{Routing-Mode:} IP-Tunnel\\
$\circ$ \textbf{Port Forwarding / Tunnelling mit SSH:} Tunneln von TCP-Verbindungen über \textit{SSH} (Anwendungsschicht) - kein echtes \textit{VPN}\\

\newpage

\subsection{Sichere WLANs}
\vspace{-1.5em}
\textbf{802.11: Wired Equivalent Privacy (WEP)}\\

\vspace{-1.5em}
\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.495]{images/wep_encryption_decryption.png}} &
	\makecell[l]{
		$\circ$ Schlüsselverteilung nicht Teil von \textit{WEP}, Aufgaben lediglich\\\hspace*{2.5mm}Authentifizierung und Verschlüsselung (mit Stromchiffre \textit{RC4})\\
		$\circ$ \textbf{Schlüssel:}\\
		\hspace*{2.5mm}- 24-Bit Initialisierungsvektor (\textit{IV}), wechselt von Rahmen zu Rahmen,\\
		\hspace*{2.5mm}\hspace*{2.5mm}wird im Klartext übertragen\\
		\hspace*{2.5mm}- 40-Bit (später 104-Bit) symmetrischer Schlüssel (\textit{Root Key})\\
		$\circ$ $m(i)$:= Nachricht-Byte; $ks(i)$:= Schlüsselstrom-Byte; $c(i)$:= Cipher-Byte\\
		\hspace*{2.5mm}- Sender: $c(i) = ks(i)$ $XOR$ $m(i)$; Empfänger: $m(i) = ks(i)$ $XOR$ $c(i)$\\
		$\circ$ \textit{Integrity Check Value} (\textbf{ICV}):\\
		\hspace*{2.5mm}- \textit{CRC32} über zu verschlüsselnde Daten\\
		\hspace*{2.5mm}- \textit{Root Key} und \textit{IV} zur Verschlüsselung von Daten und \textit{ICV}\\
		\hspace*{2.5mm}- schützt vor zufälligen Fehlern, nicht vor Angreifer (kein geeigneter \textit{MAC})\\
		$\circ$ \textbf{Authentifizierung:}\\
		\hspace*{2.5mm}- \textbf{Open System:} Alle Authentifizierungsnachrichten w/o Prüfung zulassen\\
		\hspace*{2.5mm}\hspace*{2.5mm}$\Rightarrow$ Client kann ohne Schlüssel keine korrekten Nachrichten senden\\
		\hspace*{2.5mm}- \textbf{Shared Key:} Client sendet Request an AccessPoint\\
		\hspace*{2.5mm}\hspace*{2.5mm}AP sendet 128-Byte \textit{Nonce}, Client verschlüsselt \textit{Nonce} mit \textit{shared key}\\
		\hspace*{2.5mm}\hspace*{2.5mm}AP entschlüsselt Ciphertext mit \textit{IV} und \textit{shared key} (Ergebnis = \textit{Nonce})
	}
\end{tabular}\\

\vspace{-1.5em}
\textbf{Probleme mit \textit{Shared Key Authentication} bei WEP:}\\
$\circ$ Angreifer kann \textit{IV}, \textit{Nonce} und \textit{Antwort} beobachten, daraus kann er gültigen Schlüsselstrom und \textit{IV} erzeugen:\\
\text{\hspace*{2.5mm}$Nonce$ $XOR$ $(Nonce$ $XOR$ $keystream) = keystream$ $\Rightarrow$ Angreifer kann gültige Authentifizierungsnachrichten für beliebige \textit{Nonce} erstellen}\\
\hspace*{2.5mm}$\Rightarrow$ \textbf{Unsicherer} als \textit{Open System}\\
\text{$\circ$ \textbf{Problem 1:} Nur $2^{24}$ verschiedene Schlüssel (\textit{IV}-Länge) $\Rightarrow$ \textit{IV} wird aufgrund heutiger Datenraten in weniger als einem Tag erneut verwendet}\\
\hspace*{2.5mm}Angreifer kann selbst Datenverkehr generieren (z.B. ARP-Requests durch mitschneiden da ARP bekannte Länge bzw. Plaintext fix)\\
$\circ$ \textbf{Problem 2:} \textit{IV} wird im Klartex übertragen $\Rightarrow$ Angreifer kann Wiederholung leicht erkennen\\

\vspace{-2em}
\textbf{802.11i: Temporal Key Integrity Protocol (TKIP)}\\
\text{$\circ$ Ersatz für \textit{WEP}, aber mit selber Hardware funktionsfähig, \textit{IV} erweitert auf 48-Bit, neue Hash-Funktion, \textit{Personal}-Mode mit pre-shared key}\\

\vspace{-2em}
\textbf{802.11i: Counter Mode with Cipher Block Chaining Message Authentication Code Protocol (CCMP)}\\
$\circ$ Verwendet \textit{AES} mit 128-Bit Schlüssel und 48Bit \textit{IV} (anstatt RC4)\\
$\circ$ Teil des \textit{WPA2}-Verfahrens, WPA2 würde alternativ auch \textit{TKIP} erlauben (\textbf{empfohlen ist allerdings WPA2 + CCMP})\\

\vspace{-2em}
\textbf{802.11i: WPA3}\\
$\circ$ 128-Bit (\textit{personal} mode) bzw. 192-Bit (\textit{enterprise} mode) + \textit{Forward Secrecy}\\

\vspace{-2em}
\textbf{Extensible Authentication Protocol (EAP)}\\
$\circ$ Protokoll für sichere Ende-zu-Ende Authentifizierung zwischen mobilen Clients und Authentifizierungsserver über einen Access Point\\
$\circ$ \textit{EAP-TLS}: Nutzung von Zertifikaten; \textit{EAP-PEAP:} Verschlüsselter Tunnel für Authentifizierung\\

\vspace{-2em}
\textbf{802.1X}\\
$\circ$ Erweitert \textit{802.11} durch \textit{EAP} um Sicherheitsfunktionen wie: Schlüsselmanagement, Nutzeridentifikation, Tokens...

\newpage


\subsection{DNS Security Extensions (DNSSEC)}
\vspace{-1.5em}
$\circ$ Absicherung von Authentizität und Integrität der DNS-Informationen (\textbf{nicht} Vertraulichkeit)\\
$\Rightarrow$ Verwendung von Signaturen, umgesetzt mit asymmetrischen Kryptosystem (public \& private Key):\\
\hspace*{2.5mm}\hspace*{2.5mm}- \textit{Resource Record} (RR) wird mit geheimen Schlüssel unterschrieben\\
\hspace*{2.5mm}\hspace*{2.5mm}- DNS Client prüft mit öffentlichem Schlüssel die Authentizität und Integrität des empfangenen \textit{RR}s\\
\hspace*{2.5mm}\hspace*{2.5mm}- \textit{Chain-of-Trust:} Höhere Zone im DNS-Baum bestätigt durch Signierung die öffentlichen Schlüssel der unteren Zonen,\\
\hspace*{2.5mm}\hspace*{2.5mm}\hspace*{2.5mm}$\rightarrow$ der Anfragende muss nur obersten public key kennen (\textit{Key Signing Key})\\
$\circ$ Realisierung über neue Resource Record Typen:\\
\vspace{-1.25em}
\hspace*{2.5mm}\begin{tabular}{l|l|l}
	\textbf{RR Typ} & \textbf{Erläuterung} & \multirow{2}{*}{\makecell[l]{
			\includegraphics[scale=0.2]{images/dns_hierarchie.png}
	}}\\
	RRSIG & Digitale Signatur eines \textit{Resource Record Sets} (RRset) &\\
	DNSKEY & \makecell[l]{Public Signing Key, wird vom Resolver zur Prüfung digitaler Signaturen\\verwendet} &\\
	\hline
	DS & \makecell[l]{Delegation Signer: Hash des \textit{DNSKEY} um dessen Authentizität\\sicherzustellen,delegiert Vertrauen eine Ebene weiter in Chain-of-Trust} &\\
	\hline
	CNSKEY, CDS & Child Zone informiert Parent: Key-Signing-Key ändern, DNSSEC an/aus &\\
\end{tabular}\\

\begin{enumerate}[label=\textbf{\arabic*}]
	\setlength\itemsep{-1em}
	\item \begin{tabular}{ll}
		\raisebox{-.5\height}{\includegraphics[scale=0.325]{images/rrset.png}} &
		\makecell[l]{
			$\circ$ Gruppieren von gleichen RRs (Label, Klasse \& Typ) zu einem \textit{RRset}\\
			$\circ$ RRset kann später gemeinsam signiert werden
		}
	\end{tabular}
	\item \begin{tabular}{ll}
		\raisebox{-.5\height}{\includegraphics[scale=0.3125]{images/rrsig.png}} &
		\makecell[l]{
			$\circ$ Für Zone zuständiger, authoritativer DNS-Server nutzt privaten Schlüssel\\
			\hspace*{2.5mm}des \textit{Zone Signing Key Pair} (ZSK) um RRset zu signieren $\rightarrow$ RRSIG
		}
	\end{tabular}
	\item \begin{tabular}{ll}
		\raisebox{-.5\height}{\includegraphics[scale=0.3]{images/dnskey.png}} &
		\makecell[l]{
			$\circ$ DNS Resolver benötigt öffentlichen Schlüssel des \textit{ZSK}\\
			\hspace*{2.5mm}$\rightarrow$ wird über \textit{DNSKEY} verbreitet\\
			$\circ$ DNS Server liefert RRSIG mit an den DNS Resolver,\\
			\hspace*{2.5mm}dieser verifiziert RR durch DNSKEY
		}
	\end{tabular}
	\item \begin{tabular}{ll}
		\raisebox{-.5\height}{\includegraphics[scale=0.3]{images/kskzsk.png}} &
		\makecell[l]{
			$\circ$ Zone erstellt weitere Schlüsselpaar: \textit{Key Signing Key} (KSK)\\
			$\circ$ Hierarchischer Ansatz: Parent bestätigt KSK und KSK validiert ZSK\\
			$\circ$ ZSK kann nun unabhängig vom Parent geändert werden\\
			\hspace*{2.5mm}(falls ZSK kompromittiert)\\
			$\circ$ RRset bestehend aus $ZSK_{pub}$ \& $KSK_{pub}$ wird mit $KSK_{priv}$ signiert
		}
	\end{tabular}
	\item Chain-of-Trust: Vertrauen muss von Parent auf Child Zone übertragen werden können $\rightarrow$ \textit{Delegation Signer} (DS)-Record\\
	Zonen-Operator der Child-Zone erstellt Hash von DNSKEY mit $KSK_{pub}$ \& gibt ihn an Parent:\\
	- Dieser veröffentlicht ihn in \textit{DS}-Record
\end{enumerate}

\vspace{-2.5em}
\subsection{DNS over TLS}
\vspace{-1.5em}
$\circ$ Absicherung von Vertraulichkeit
\vspace{-1.5em}
\begin{enumerate}
	\setlength\itemsep{-1.25em}
	\item DNS Client (DNS Stub Resolver) baut TCP-Verbindung zu Resolver auf
	\item TLS Handshake wird durchgeführt (\textit{DNS Stub Resolver} = DNS Client, \textit{DNS Resolver} = Server)\\
	- Resolver sendet TLS Zertifikat\\
	- DNS Stub Resolver prüft Zertifikat mit Hash des öffentlichen Schlüssels des Resolvers
	\item Ab jetzt sendet DNS Stub Resolver alle DNS Anfragen über mit TLS geschützte TCP-Verbindung\\
	- Übertragung einer Nachricht: 2-Byte Längenangabe + Nachricht\\
	\text{\hspace*{2.5mm}beim Zusammensetzen muss man wissen, wie lange die ursprüngliche Nachricht war, wenn sie in einzelne TCP-Pakete zerstückelt wurde}
	\item Verbindung bleibt offen bis DNS Stub Resolver sie schließt
	\item Umsetzung: Als Betriebssystem-Dienst (z.B. \textit{systemd-resolved} unter Linux) oder\\
	lokaler Forwarder der als localhost-DNS-Server im Betriebssystem eingetragen wird und Anfragen über TLS weiterleitet
\end{enumerate}

\vspace{-2.5em}
\subsection{DNS over HTTPS}
\vspace{-1.5em}
\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.4]{images/dns_over_https.png}} &
	\makecell[l]{
		$\circ$ Absicherung von Vertraulichkeit\\
		$\circ$ Probleme: Genutzter DNS-Server ist Anwendungsspezifisch\\
		\hspace*{2.5mm}(z.B. Browser), firmeneigene DNS-Server werden umgangen\\
		$\circ$ Internet Web-/Maildienste funktionieren nicht mehr\\
		\hspace*{2.5mm}(werden nur vom internen DNS aufgelöst)\\
		$\circ$ DNS-Filter gegen Malware unwirksam\\
		$\circ$ Nur wenige Firmen (Cloudfare, Google) bieten DNS-over-HTTPS\\
		$\rightarrow$ Konzentration auf wenige Anbieter, Privatssphäre Gefärdung\\
		$\circ$ Viel Overhead (Anwendungsschicht: DNS, HTTP, TLS\\
		\hspace*{2.5mm}Transportschicht: TCP statt UDP)\\
		$\circ$ Blockieren schwierig da Port \textit{443} HTTPS Standardport
	}
\end{tabular}

\includegraphics[scale=0.425]{images/dns_over_tls_https.png}

\vspace{-2.75em}
\subsection{Firewall}
\vspace{-2em}
$\circ$ Pakete mit bestimmten Ziel-Ports dürfen passieren, andere werden geblockt, z.B:
\vspace{-1.5em}
\begin{itemize}
	\setlength\itemsep{-1.33em}
	\item \textit{Denial of Service} (DoS) Attacken von außen abwehren
	\item Zugriff auf interne Dienste blockieren
	\item Zugriff aus Firmennetz auf Internetdienste beschränken
\end{itemize}
\vspace{-1.5em}
$\circ$ Typen:
\vspace{-1.5em}
\begin{itemize}
	\setlength\itemsep{-1.33em}
	\item \textbf{Stateless Packet Filters:} Entscheidung ob durchlassen oder verwerfen wird pro Paket einzeln getroffen,\\
	basiert auf Quell- oder Zieladresse, Quell- oder Zielport, Protokolltyp, TCP SYN/ACK
	\item \textbf{Stateful Packet Filters:} Verfolgt Status der Protokolle (z.B. TCP), nur zum Status passende Pakete werden durchgelassen
	\item \textbf{Proxy Firewall / Application Layer Firewall / Deep Packet Insepction (DPI):} Filtern Pakete basierend auf Applikationsdaten \& IP/TCP/UDP-Header, ermöglicht Blockieren bestimmter Applikationen für bestimmte Nutzer
	\item Konkret \textbf{Proxy Firewall:} Tunnelt interne Anfrage über separate Verbindung nach draußen und inspiziert Pakete
	\item Konkret \textbf{Deep-Packet-Inspection:} Lässt Verbindung laufen und inspiziert gleichzeitig Paketinhalt
\end{itemize}
\vspace{-1.5em}
\begin{tabular}{c|c|c|c|c|c|c}
	\multicolumn{7}{c}{\textbf{Stateless Firewall}}\\
	\hline
	\textbf{Action} & \textbf{Source-Addr} & \textbf{Dest-Addr} & \textbf{Protocol} & \textbf{Source-Port} & \textbf{Dest-Port} & \textbf{Flag}\\
	\hline
	allow & 222.22/16 & \textit{outside} 222.22/16 & TCP & >1023 & 80 & any\\
	allow & outside 222.22/16 & 222.22/16 & TCP & 80 & >1023 & ACK\\
	\hline
\end{tabular}\\
\vspace{-.5em}
\begin{tabular}{c|c|c|c|c|c|c|c}
	\multicolumn{8}{c}{\textbf{Stateful Firewall}}\\
	\hline
	\textbf{Action} & \textbf{Source-Addr} & \textbf{Dest-Addr} & \textbf{Protocol} & \textbf{Source-Port} & \textbf{Dest-Port} & \textbf{Flag} & \makecell[c]{\textbf{Check Conn.}\\Prüfung Verbindungsstatus\\erforderlich}\\
	\hline
	allow & 222.22/16 & outside 222.22/16 & TCP & >1023 & 80 & any & {}\\
	allow & outside 222.22/16 & 222.22/16 & TCP & 80 & >1023 & ACK & $\times$\\
	\hline
\end{tabular}

\newpage

\subsection{Intrusion Detection Systems (\textit{IDS})}
\vspace{-1.5em}
$\circ$ Erkennt Angriffe von außen und ermöglicht (automatisierte) Reaktion\\
$\circ$ Überprüfen des Paketinhalts auf verdächtige Inhalte (z.B. \textit{SQL Injection}) sowie Korrelation zwischen mehreren Paketen erkennen (\textit{DoS}, \textit{Port Scanning})

\vspace{-1.5em}
\section{Multimedia}
\vspace{-2.5em}
\text{$\circ$ Verbreitung von Multimedia-Daten (Video-Streaming, Internet-TV, VoIP) mit hohen Datenmengen so geringer Verzögerungen wie möglich}\\
\vspace{-2.5em}
\begin{itemize}
	\setlength\itemsep{-1.25em}
	\item \textbf{Streaming aufgezeichneter Inhalte:} Da gespeicherte Daten kann der Nutzer vor- \& zurückspulen\\
	Kontinuierliche Ausgabe, Vermeidung von Wartezeiten durch Streaming
	\item \textbf{Streaming von Live-Audio und Video:} Inhalte liegen nicht vorab vor (\textbf{kein} Vorspulen)\\
	Viele Clients sehen gleiches Programm, eventuell Verteilung per \textit{Multicast}
	\item \textbf{Interaktives Audio und Video:} Verzögerungen $>150$ms störend $\rightarrow$ kaum Vorpuffern möglich
\end{itemize}

\vspace{-2.5em}
\subsection{Grundlagen}
\vspace{-2em}
\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.35]{images/playout_buffer.png}} &
	\makecell[l]{
		$\circ$ Puffern und verzögertes Abspielen (\textbf{playout buffer/delay})\\
		\hspace*{2.5mm}Kompensation von Verzögerungen (\textit{network delay})\\
		\hspace*{2.5mm}und Jitter (Schwankungen in der Verzögerung)\\
		$\circ$ Buffern:\\
		\hspace*{2.5mm}- Initiales Befüllen des Buffers bis zum Start des Abspielens ($t_p$)\\
		\hspace*{2.5mm}- Füllstand $Q(t)$ des Buffers ändert sich über Zeit aufgrund\\
		\hspace*{2.5mm}\hspace*{2.5mm}\textit{variabler} Füllrate $x(t)$\\
		\hspace*{2.5mm}- \textit{mittlere Füllrate} $\bar{x}$ < $r$: Buffer leer sich\\
		\hspace*{2.5mm}\hspace*{2.5mm}$\Rightarrow$ Video stockt, Rebuffering\\
		\hspace*{2.5mm}- \textit{mittlere Füllrate} $\bar{x}$ > $r$: Buffer nie komplett leer\\
		\hspace*{2.5mm}\hspace*{2.5mm}solange $B$ ausreichend groß für Schwankungen von $x(t)$\\
		\hspace*{2.5mm}$\Rightarrow$ Großes $B$ bedeutet größere Startverzögerung
	}
\end{tabular}

\vspace{-1em}
\textbf{Streaming über UDP:}\\
$\circ$ Prinzipiell UDP besser als TCP da geringere Verzögerung und Multicast möglich\\
\text{$\circ$ \textbf{Sender:} UDP-Pakete mit Datenrate des kodierten Multimedia-Datenstroms, \textbf{Client:} kleiner Buffer (2-5s), App.-Layer Fehlerbehebung}\\
$\circ$ \textbf{Aber:} UDP oft nicht durch Firewalls/NAT, separate Kontrollverbindung für Stop/Pause über TCP (RTSP),\\
\hspace*{2.5mm}Reaktion auf Änderung der Bandbreite

\vspace{-1em}
\textbf{Streaming über HTTP (TCP):}\\
\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.35]{images/streaming_tcp.png}} &
	\makecell[l]{
		$\circ$ Abruf der Multimedia-Datei per \textit{GET}\\
		$\circ$ Senderate variiert (TCP \textit{Congestion Control}, \textit{Flow Control},\\
		\hspace*{2.5mm}\textit{Retransmissions})\\
		$\circ$ HTTP/TCP passiert Firewalls meist ohne Probleme
	}
\end{tabular}

\vspace{-2em}
\subsection{Dynamic Adaptive Streaming over HTTP (DASH)}
\vspace{-2em}
$\circ$ Problem TCP-Streaming: Bandbreite variiert durch HTTP+TCP, \textit{DASH:}\\
\vspace{-2.75em}
\begin{itemize}
	\setlength\itemsep{-1.25em}
	\item Aufteilen der Multimedia-Datei in \textit{Chunks}
	\item Mehrfache Kodierung jedes Chunks in unterschiedlichen Versionen mit anderer Bitrate ($\rightarrow$ Qualitätsstufen)
	\item Manifest-Datei: URLs der unterschiedlichen Versionen, wird von Media-Server an Client geschickt
	\item Client wählt passende Version abhängig von Bandbreite
\end{itemize}

\vspace{-1.5em}
$\circ$ Intelligenz beim Client:\\
\vspace{-2.75em}
\begin{itemize}
	\setlength\itemsep{-1.25em}
	\item Misst periodisch Datenrate \& fordert passend kodierten \textit{Chunk} an (Reaktion auf Bandbreiten-Schwankungen)
	\item Bestimmt, \textit{wann} welcher Chunk angefordert wird (\textit{Buffer-Handling} demnach auch beim Client)
	\item Bestimmt, von \textit{wo} Chunk angefordert wird (z.B. der am besten erreichbare Server)
\end{itemize}

\newpage

\subsection{Real-Time Streaming Protocol (RTSP)}
\vspace{-2em}
\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.45]{images/rtsp.png}} &
	\makecell[l]{
		$\circ$ Client-Server Protokoll auf App.-Layer zur Steuerung des Multimedia-Datenstroms\\
		\hspace*{2.5mm}(\textit{Play}, \textit{Pause}, \textit{Fast-Forward})\\
		$\circ$ Separate \textit{Kontrollverbindung}, Mediendaten selbst per UDP oder TCP\\
		$\circ$ \textit{RTSP} spezifiziert \textbf{nicht:} Kompression Audio/Video, \textit{wie} Übertragen wird, Pufferverhalten\\
		$\circ$ \textit{Präsentationsbeschreibungsdatei:}\\
		\hspace*{2.5mm}$<title>Twister</title><session><group language=en lipsync>$\\
		\hspace*{2.5mm}$<switch><track type=audio src='rtsp://audio.example.com/audio.en/lofi'>$\\
		\hspace*{2.5mm}$<track type=audio src='rts://audio.example.com/audio.en/hifi'></switch>$\\
		\hspace*{2.5mm}$<track type='video/jpeg' src="rtsp://video.example.com/twister/video>$\\
		\hspace*{2.5mm}$</group></session>$
	}
\end{tabular}

\vspace{-2em}
\subsection{Content Distribution Networks (CDNs)}
\vspace{-2em}
\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.35]{images/cdn.png}} &
	\makecell[l]{
		$\circ$ \textbf{Enter Deep:}\\
		\hspace*{2.5mm}- Große Anzahl Cluster innerhalb der Zugangsnetze der \textit{ISPs}\\
		\hspace*{2.5mm}\hspace*{2.5mm}Nah beim Endnutzer (geringe Latenz, wenig Hops)\\
		\hspace*{2.5mm}- Verfolgt Akamai (> 1700 Cluster an verschiedenen Orten)\\
		$\circ$ \textbf{Bring Home:}\\
		\hspace*{2.5mm}- Geringere Anzahl Cluster, verbunden über privates\\
		\hspace*{2.5mm}\hspace*{2.5mm}Hochgeschwindigkeitsnetz\\
		\hspace*{2.5mm}- Nahe der \textit{Points-of-Presence} von \textit{Tier-1} ISPs\\
		\hspace*{2.5mm}- Leichter zu verwalten aber etwas mehr Hops zum Nutzer
	}
\end{tabular}

\vspace{-1em}
\begin{tabular}{ll}
	\makecell[l]{
		$\circ$ $(1)$ Nutzer surft auf $www.netcinema.de$\\
		$\circ$ $(2)$ Klickt auf Video $video.netcinema.de/4711abc$\\
		\hspace*{2.5mm}$\rightarrow$ Client sendet \textit{DNS-Request} and $video.netcinema.de$\\
		$\circ$ $(3)$ Lokaler DNS leitet Anfrage an für $netcinema.de$ zuständigen DNS\\
		\hspace*{2.5mm}$\rightarrow$ erkennt Video-Anfrage (nutzt \textit{CDN})\\
		\hspace*{2.5mm}$\rightarrow$ liefert keine IP, sondern Hostname aus CDN\\
		\hspace*{2.5mm}\hspace*{2.5mm}(z.B. $a42.kingcdn.de$)\\
		$\circ$ $(4)$ Lokaler DNS sendet Anfrage an $a42.kingcdn.de$ an\\
		\hspace*{2.5mm}dafür zuständigen DNS-Server (Teil des \textit{CDN})\\
		\hspace*{2.5mm}$\rightarrow$ Entscheidung, welcher Content-Distribution Server liefern soll\\
		\hspace*{2.5mm}$\rightarrow$$\rightarrow$ IP des Distribution Server nahe dem User\\
		$\circ$ $(5)$ Lokaler DNS leitet IP an Client weiter\\
		$\circ$ $(6)$ Client ruft Video per HTTP GET ab\\
		$\circ$ mit \textit{DASH} liefert Server \textit{Manifest}-Datei, Client wählt dynamisch
	} & \raisebox{-.5\height}{\includegraphics[scale=0.35]{images/cdn_2.png}}

\end{tabular}
$\circ$ \textit{CDNs} auch per \textit{HTTP-Weiterleitung} möglich, bei DNS-Ansatz sieht Client aber die verborgene DNS-Struktur nicht!\\
$\circ$ Passender \textit{Content Distribution Cluster} bestimmen durch: Geographische Lage, geringste Verzögerung (\textit{Hops}),\\
\hspace*{2.5mm}\textit{IP-Anycast} (Server mit kürzester Route antwortet), oder Client ermittelt den Besten via \textit{ping}s)\\
$\circ$ \textit{Kankan} in China wählt Peer-to-Peer (ähnlich \textit{BitTorent}) Ansatz für CDN (Hash-Tabelle zum Auffinden der Inhalte)

\vspace{-2.25em}
\subsection{Voice over IP (VoIP)}
\vspace{-2em}
$\circ$ Digitalisierung der Sprache mit 8000 Bytes/s (64 kbit/s) (\textit{Nyquist-Shannon-Abtasttheorem} $\Rightarrow$ Rekonstruktion von max. 4kHz)\\
\hspace*{2.5mm}\textit{Abtastung:} Alle 8000Hz eine Messung, \textit{Quantisierung:} Analoger Messwert in 8-bit Digitalwert überführen\\
$\circ$ Digitalisierte Sprache per UDP von 160Bytes alle 20ms senden\\


\newpage


$\circ$ Herausforderungen:\\
\vspace{-2.75em}
\begin{itemize}
	\setlength\itemsep{-1.25em}
	\item \textbf{Paketverluste:} UDP Segmente gehen verloren (1 - 20\% je nach Kodierung vertretbar)
	\item \textbf{Ende-zu-Ende Verzögerung:} $<150$ms: nicht störend, $>400$ms: sehr störend, Teilnehmer \textit{fallen sich ins Wort}
	\item \textbf{Jitter:} Pakete haben unterschiedliche Verzögerung (Empfänger kann nicht jedes empfangene sofort abspielen)\\
	$\rightarrow$ Zeitstempel vor jedem gesendeten Block (zu 160 Bytes) einfügen\\
	$\rightarrow$ Feste- oder adaptive Verzögerung des Abspielens (\textit{playout delay})\\
	\hspace*{2.5mm}\textbf{Feste Verzögerung:}\\
	\includegraphics[scale=0.33]{images/voip_feste_verzoegerung.png}\\
	Nur geringe Verzögerung $q = p_1 - r$: Aussetzer bei $(1)$\\
	Bei größerer Verzögerung $q = p_2 - r$: kein Aussetzer bei $(2)$
\end{itemize}
\vspace{-1.5em}
\textbf{Abspielverzögerung $q$}\\
$\circ$ Empfänger spielt Daten mit Verzögerung $q$ ab (Zeit $t$ $\rightarrow$ Abspielen bei $t + q$)\\
$\circ$ Paketverlust wenn Paket nach $t + q$ ankommt\\
$\circ$ \textbf{Tradeoff:} Großes $q$: wenig Paketverlust, Kleines $q$: interaktiver, weniger Verzögerung\\

\vspace{-2.5em}
\textbf{Adaption der Abspielverzögerung}\\
$\circ$ Anpassen der Abspielverzögerung bei Perioden der Stille im Gespräch (Schätzung der Verzögerung mit Hilfe der Zeitstempel)\\
\hspace*{2.5mm}$\rightarrow$ Exponentiell gewichteter, gleitender Mittelwert: $d_i = (1 - \alpha)d_{i-1} + \alpha(r_i - t_i)$ mit\\
\hspace*{2.5mm}\hspace*{3.5mm}$d_i$ := Schätzung nach Paket $i$, $\alpha$ := Konstante < $1$, $r_i$ := Empfangszeitpunkt Paket $i$, $t_i$ := Zeitstempel Paket $i$ (Sendezeitpunkt)\\
\hspace*{2.5mm}$\rightarrow$ Standardabweichung $v_i = (1 - \beta)v_{i-1} + \beta|r_i - t_i - d_i|$\\
\hspace*{2.5mm}$\rightarrow$ \textit{zu Beginn} der Redeperiode Berechnung Abspielzeitpunkt $p_i = t_i + d_i + K\cdot v_i$ mit $K$ := positive Ganzzahl-Konstante\\
\hspace*{2.5mm}$\Rightarrow$ Nur so lange verzögern, wie nötig

\begin{tabular}{l}
	\raisebox{-.5\height}{\includegraphics[scale=0.4]{images/voip_paketverlust.png}}
\end{tabular}\\

$\circ$ \textbf{Forward Error Correction:} Einfügen redundanter Informationen in Nutzdaten, zur Korrektur von Fehlern/Verlusten\\
$\circ$ \textbf{Interleaving:} Umordnen \& Verzahnen des Datenstroms, Verlust eines Paketes führt zu vielen kleinen (tolerierbaren) Lücken\\
\hspace*{2.5mm}und nicht zu einer großen (auffälligen) Lücke\\
$\circ$ \textbf{Verschleierung (Error Concealment):} Empfänger generiert Audio-Daten zum Füllen der Lücke (\textit{Interpolation},\\
\hspace*{2.5mm}Wiederholung des vorherigen Paketes)

\newpage

\subsection{Real-Time Protocol (RPT)}
\vspace{-2.125em}
\begin{tabular}{ll}
	\makecell[l]{
		$\circ$ Standardisiertes Paketformat für Multimedia/VoIP\\
		$\circ$ Unabhängig von Art der übertragenen Daten (MP3, H.263, etc.)\\
		$\circ$ RTP Payload wird über UDP Segmente übertragen (Unicast \& Multicast)\\
		$\circ$ Vorteile als Entwickler sind vorhandene Bibliotheken/Tools und\\
		\hspace*{2.5mm}Zusammenarbeit unterschiedlicher RTP-Anwendungen\\
		$\circ$ \textit{Header}\\
		\hspace*{2.5mm}- \textbf{RTP-Version} mit 2 Bit\\
		\hspace*{2.5mm}- \textbf{Padding-Bit} gibt an, ob hinter Nutzdaten noch Padding eingefügt ist\\
		\hspace*{2.5mm}- \textbf{Extension-Bit} gibt an, ob hinter RTP-Header noch Extension-Header folgt\\
		\hspace*{2.5mm}- \textbf{CSSI-Count}: Anzahl \textit{CSSI}-Werte\\
		\hspace*{2.5mm}- \textbf{Marker-Bit:} Art des Payloads\\
		\hspace*{2.5mm}- \textbf{Payload-Type:} PCM = 0; GSM = 3; H.261 = 31; MPEG2 = 33...\\
		\hspace*{2.5mm}- \textbf{Sequence Number} wird für jedes gesendete RTP-Paket erhöht\\
		\hspace*{2.5mm}\hspace*{2.5mm}(Empfänger erkennt Reordering/Verluste)\\
		\hspace*{2.5mm}- \textbf{Timestamp} gibt Zeitpunkt der Aufnahme des 1. Bytes an\\
		\hspace*{2.5mm}- \textbf{Synch. Source Identifier} ist eindeutiger Zufallswert, der Quelle \\
		\hspace*{2.5mm}\hspace*{2.5mm}der Daten identifiziert\\
		\hspace*{2.5mm}- \textbf{Contr. Synch. Source Identifiers} (\textit{CSSI}) ist Angabe der Quellen\\
		\hspace*{2.5mm}\hspace*{2.5mm}der Multimediadaten
	} & \raisebox{-.5\height}{\includegraphics[scale=0.425]{images/rtp_header.png}}
\end{tabular}
$\circ$ \textbf{Beispiel:} Abtastung Sprachsignal mit 8kHz ($\rightarrow$ alle 125$\mu$s ein 8-Bit Wert), Anwendung sammelt kodierte Audiodaten in \textit{Chunks}\\
\hspace*{2.5mm}- z.B. alle 20ms einen Chunk zu 160 Bytes\\
\hspace*{2.5mm}- RTP-Header hat Payload-Type 0\\
\hspace*{2.5mm}- Timestamp startet bei 0 und wird für jedes Paket um 160 erhöht (Einheit ist Sampling-Periode, d.h. im Beispiel 125 $\mu$s)\\
\hspace*{2.5mm}- Der Header bildet zusammen mit Chunk das RTP-Paket, das als UDP-Segment verpackt und versendet wird.

\vspace{-2.25em}
\subsection{Session Initiation Protocol (SIP)}
\vspace{-2.125em}
\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.4125]{images/sip.png}} & \makecell[l]{
		$\circ$ Mechanismus zum \textbf{Auf-/Abbau von Kommunikationssitzungen}\\
		\hspace*{2.5mm}- Benachrichtigen des Angerufenen und Aushandeln der Kodierung der\\
		\hspace*{2.5mm}\hspace*{2.5mm}Multimedia-Inhalte\\
		$\circ$ Mechanismus zur \textbf{Feststellung der IP-Adresse} des Angerufenen\\
		\hspace*{2.5mm}- Dynamisch per DHCP oder Anrufer nutzt unterschiedliche Geräte\\
		\hspace*{2.5mm}\hspace*{2.5mm}mit unterschiedlichen IPs\\
		$\circ$ Mechanismus zum \textbf{Verbindungsmanagement}\\
		\hspace*{2.5mm}- Änderungen der Kodierung, Hinzufügen neuer Multimedia-Streams\\
		\hspace*{2.5mm}\hspace*{2.5mm}und neuer Nutzer, Anrufweiterleitung\\
		$\circ$ Verbindungsaufbau:\\
		\hspace*{2.5mm}- \textbf{INVITE-Message} per \textit{well-known} Port 5060 über UDP oder TCP\\
		\hspace*{2.5mm}\hspace*{2.5mm}- Enthält Informationen des Anrufers und des Angerufenen, zur\\
		\hspace*{2.5mm}\hspace*{2.5mm}\hspace*{2.5mm}gewünschten Kodierung und zum gewünschten Port\\
		\hspace*{2.5mm}- \textbf{SIP-Response} enthält Status-Code, Kodierung und Port\\
		\hspace*{2.5mm}- \textbf{SIP-Acknowledgement}\\
		\hspace*{2.5mm}- Anschließend Audio-Verbindung über RTP-Protokoll über separate\\
		\hspace*{2.5mm}\hspace*{2.5mm}Verbindung zwischen ausgehandelten Ports (willkürlich 38060 und 48753)\\
		$\circ$ Syntax ähnlich HTTP - menschenlesbar, mit Ressource, Version, Methode\\
		\hspace*{2.5mm} INVITE sip:08413708048@fritz.box:5060 SIP/2.0\\
		\hspace*{2.5mm} Via: SIP/2.0/UDP 192.168.56.1:52953\\
		\hspace*{2.5mm} From: sip:623@fritz.box;tag=aab36c6cb0dbbc46898c473859b\\
		\hspace*{2.5mm} To: sip:08413708048@fritz.box\\
		\hspace*{2.5mm} Call-ID: c92f5ab1b9ed4a25bc450368f60bd240\\
		\hspace*{2.5mm} CSeq: 16918 INVITE\\
		\hspace*{2.5mm} Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, (...)\\
		\hspace*{2.5mm} Content-Type: application/sdp\\
		\hspace*{2.5mm} Content-Length: 459\\
		\hspace*{2.5mm} ...
	} 
\end{tabular}

\newpage

\vspace{-2.5em}
\textbf{SIP Adressen}\\
$\circ$ Direkte Angabe der IP-Adresse: \textit{sip:bob@193.64.210.89}\\
$\circ$ Angabe einer eindeutigen Identifikation, die aufgelöst werden kann z.B. E-Mail: \textit{sip:bob@domain.de} oder Telefonnummer\\
$\circ$ SIP-Adressen können in Webseiten eingebettet werden

\vspace{-1.5em}
\textbf{Auffinden der Nutzer}\\
\begin{tabular}{ll}
	\raisebox{-.5\height}{\includegraphics[scale=0.325]{images/sip_ablauf.png}} & \makecell[l]{
		$\circ$ Wie gelangt die \textit{INVITE}-Nachricht zum Nutzer, wenn dessen\\
		\hspace*{2.5mm}IP nicht bekannt (\textit{jim@umass.edu} $\rightarrow$ \textit{keith@poly.edu})?\\
		$\circ$ Nachricht geht zuerst an \textbf{SIP Proxy}\\
		\hspace*{2.5mm}- Lokaler Ansprechpartner, dessen SIP Response aktuelle\\
		\hspace*{2.5mm}\hspace*{2.5mm}IP-Adresse enthält\\
		$\circ$ \textit{SIP-Proxy} fragt nach bei \textbf{SIP Registrar}\\
		\hspace*{2.5mm}- Jede SIP-Applikation meldet sich bei Start über \textit{SIP REGISTER}\\
		\hspace*{2.5mm}\hspace*{2.5mm}bei seinem Registrar:\\
		\hspace*{2.5mm}\hspace*{2.5mm}\hspace*{2.5mm}REGISTER sip:fritz.box:5060 SIP/2.0\\
		\hspace*{2.5mm}\hspace*{2.5mm}\hspace*{2.5mm}...\\
		\hspace*{2.5mm}\hspace*{2.5mm}\hspace*{2.5mm}From: <sip:623@fritz.box>;tag=c194fd67348a4b8b8b7\\
		\hspace*{2.5mm}\hspace*{2.5mm}\hspace*{2.5mm}To: <sip:623@fritz.box>\\
		\hspace*{2.5mm}\hspace*{2.5mm}\hspace*{2.5mm}...\\
		\hspace*{2.5mm}\hspace*{2.5mm}\hspace*{2.5mm}Expires: 300\\
		\hspace*{2.5mm}- Registrar kennt daher immer aktuelle IP-Adresse zum Gerät
	} 
\end{tabular}

\vspace{-2.25em}
\subsection{Quality of Service (QoS)}
\vspace{-2.125em}


\end{document}